"use strict";(self.webpackChunkakara=self.webpackChunkakara||[]).push([[412],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>c});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),d=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},m=function(e){var t=d(e.components);return a.createElement(i.Provider,{value:t},e.children)},s="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),s=d(n),u=l,c=s["".concat(i,".").concat(u)]||s[u]||k[u]||r;return n?a.createElement(c,p(p({ref:t},m),{},{components:n})):a.createElement(c,p({ref:t},m))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,p=new Array(r);p[0]=u;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o[s]="string"==typeof e?e:l,p[1]=o;for(var d=2;d<r;d++)p[d]=n[d];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8461:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>p,default:()=>k,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var a=n(7462),l=(n(7294),n(3905));const r={},p="Django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0",o={unversionedId:"Django/Django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0",id:"Django/Django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0",title:"Django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0",description:"1. \u5feb\u901f\u5165\u95e8",source:"@site/docs/Django/Django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0.md",sourceDirName:"Django",slug:"/Django/Django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0",permalink:"/blog/docs/Django/Django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0",draft:!1,editUrl:"https://github.com/bothinli/blog/blob/master/docs/Django/Django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Django REST Framework\u603b\u7ed3",permalink:"/blog/docs/Django/DjangoRESTFramework\u603b\u7ed3"},next:{title:"django\u76ee\u5f55\u7ed3\u6784\u5efa\u8bae",permalink:"/blog/docs/Django/django\u76ee\u5f55\u7ed3\u6784\u5efa\u8bae"}},i={},d=[{value:"1. \u5feb\u901f\u5165\u95e8",id:"1-\u5feb\u901f\u5165\u95e8",level:2},{value:"2. \u9879\u76ee\u7ed3\u6784",id:"2-\u9879\u76ee\u7ed3\u6784",level:2},{value:"3. \u8def\u7531\u914d\u7f6e",id:"3-\u8def\u7531\u914d\u7f6e",level:2},{value:"3.1 \u7b80\u5355\u7684\u793a\u4f8b",id:"31-\u7b80\u5355\u7684\u793a\u4f8b",level:3},{value:"3.2 \u8def\u5f84\u8f6c\u6362\u5668",id:"32-\u8def\u5f84\u8f6c\u6362\u5668",level:3},{value:"3.3 \u6b63\u5219\u8868\u8fbe\u5f0f\u8def\u7531",id:"33-\u6b63\u5219\u8868\u8fbe\u5f0f\u8def\u7531",level:3},{value:"3.4 \u5305\u542bapp\u7684URLconfs",id:"34-\u5305\u542bapp\u7684urlconfs",level:3},{value:"3.5 \u989d\u5916\u4f20\u53c2",id:"35-\u989d\u5916\u4f20\u53c2",level:3},{value:"3.6 \u547d\u540d URL \u6a21\u5f0f\xb6",id:"36-\u547d\u540d-url-\u6a21\u5f0f",level:3},{value:"4. \u89c6\u56fe",id:"4-\u89c6\u56fe",level:2},{value:"\u89c6\u56fe\u88c5\u9970\u5668\xb6",id:"\u89c6\u56fe\u88c5\u9970\u5668",level:3},{value:"4. \u6a21\u578b\u5c42",id:"4-\u6a21\u578b\u5c42",level:2},{value:"4.1 \u5e38\u89c1\u5b57\u6bb5\u7c7b\u578b",id:"41-\u5e38\u89c1\u5b57\u6bb5\u7c7b\u578b",level:3},{value:"4.2 \u5b57\u6bb5\u7684\u53c2\u6570",id:"42-\u5b57\u6bb5\u7684\u53c2\u6570",level:3},{value:"4.3 \u5173\u8054\u5173\u7cfb",id:"43-\u5173\u8054\u5173\u7cfb",level:3},{value:"\u591a\u5bf9\u4e00\uff08ForeignKey\uff09",id:"\u591a\u5bf9\u4e00foreignkey",level:4},{value:"\u591a\u5bf9\u591a\uff08ManyToManyField\uff09",id:"\u591a\u5bf9\u591amanytomanyfield",level:4},{value:"\u4e00\u5bf9\u4e00\uff08OneToOneField\uff09",id:"\u4e00\u5bf9\u4e00onetoonefield",level:4},{value:"4.4 \u5143\u6570\u636e\u7c7bMeta",id:"44-\u5143\u6570\u636e\u7c7bmeta",level:3},{value:"4.5 \u4e8b\u52a1",id:"45-\u4e8b\u52a1",level:3},{value:"4.6 \u914d\u7f6e\u591a\u6570\u636e\u5e93\xb6",id:"46-\u914d\u7f6e\u591a\u6570\u636e\u5e93",level:3},{value:"4.7 \u67e5\u8be2",id:"47-\u67e5\u8be2",level:3},{value:"Django\u7f13\u5b58",id:"django\u7f13\u5b58",level:2},{value:"\u914d\u7f6e\u7f13\u5b58",id:"\u914d\u7f6e\u7f13\u5b58",level:3},{value:"\u7f13\u5b58\u914d\u7f6e\u7c7b\u578b",id:"\u7f13\u5b58\u914d\u7f6e\u7c7b\u578b",level:3},{value:"<strong>\u6570\u636e\u5e93\u7f13\u5b58</strong>",id:"\u6570\u636e\u5e93\u7f13\u5b58",level:4},{value:"<strong>\u6587\u4ef6\u7f13\u5b58</strong>",id:"\u6587\u4ef6\u7f13\u5b58",level:4},{value:"<strong>\u57fa\u4e8e\u672c\u5730\u5185\u5b58\u7684\u7f13\u5b58</strong>",id:"\u57fa\u4e8e\u672c\u5730\u5185\u5b58\u7684\u7f13\u5b58",level:4},{value:"<strong>Memcached</strong>",id:"memcached",level:4},{value:"<strong>\u57fa\u4e8eredis\u7f13\u5b58</strong>",id:"\u57fa\u4e8eredis\u7f13\u5b58",level:4},{value:"\u7f13\u5b58\u914d\u7f6e\u53c2\u6570",id:"\u7f13\u5b58\u914d\u7f6e\u53c2\u6570",level:3},{value:"\u7f13\u5b58\u7c92\u5ea6",id:"\u7f13\u5b58\u7c92\u5ea6",level:3},{value:"<strong>\u5355\u9875\u7f13\u5b58</strong>",id:"\u5355\u9875\u7f13\u5b58",level:4},{value:"<strong>\u5c40\u90e8\u7f13\u5b58</strong>",id:"\u5c40\u90e8\u7f13\u5b58",level:4},{value:"<strong>\u7f13\u5b58\u5168\u7ad9</strong>",id:"\u7f13\u5b58\u5168\u7ad9",level:4},{value:"<strong>\u9ad8\u7ea7\u6280\u5de7</strong>",id:"\u9ad8\u7ea7\u6280\u5de7",level:4},{value:"\u7f13\u5b58API",id:"\u7f13\u5b58api",level:3},{value:"\u9644\u5f55",id:"\u9644\u5f55",level:2},{value:"django\u4e2d\u5f15\u5165\u5e38\u89c1\u7684\u5305",id:"django\u4e2d\u5f15\u5165\u5e38\u89c1\u7684\u5305",level:5},{value:"DRF\u4e2d\u5f15\u5165\u5e38\u89c1\u7684\u5305",id:"drf\u4e2d\u5f15\u5165\u5e38\u89c1\u7684\u5305",level:5}],m={toc:d},s="wrapper";function k(e){let{components:t,...n}=e;return(0,l.kt)(s,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0"},"Django\u57fa\u7840\u5b66\u4e60\u7b14\u8bb0"),(0,l.kt)("h2",{id:"1-\u5feb\u901f\u5165\u95e8"},"1. \u5feb\u901f\u5165\u95e8"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5b89\u88c5django")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"pip install django==3.0")),(0,l.kt)("p",null,"\u67e5\u770b\u5b89\u88c5\u7248\u672c\u53f7 ",(0,l.kt)("inlineCode",{parentName:"p"},"python -m django --version")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u521b\u5efa\u9879\u76ee")),(0,l.kt)("p",null,"\u4f7f\u7528Django\u547d\u4ee4\u521b\u5efa\u9879\u76ee\uff0c\u5b83\u4f1a\u5e2e\u4f60\u751f\u6210Django\u9879\u76ee\u7684\u4e00\u4e9b\u57fa\u7840\u4ee3\u7801\u548c\u914d\u7f6e"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"django-admin startproject project_name")),(0,l.kt)("p",null,"\u3010\u6ce8\u3011\uff1a\u5728Mac\u4e0b\uff0c\u9ed8\u8ba4\u5b89\u88c5\u7684\u662fPython2.7\uff0c\u53ef\u80fd\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\u4f1a\u627e\u4e0d\u5230django-admin\u547d\u4ee4\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u4ee3\u66ff"),(0,l.kt)("p",null,"\u200b             ",(0,l.kt)("inlineCode",{parentName:"p"},"python -m django startproject project_name")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u8fd0\u884c\u9879\u76ee")),(0,l.kt)("p",null,"\u4f7f\u7528\u547d\u4ee4 ",(0,l.kt)("inlineCode",{parentName:"p"},"python manage.py runserver [addrport]")," \u8fd0\u884cDjango\u9879\u76ee\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/ref/django-admin/#django-admin-runserver"},(0,l.kt)("inlineCode",{parentName:"a"},"runserver"))," \u547d\u4ee4\u4f1a\u5c06\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3a\u76d1\u542c\u672c\u673a\u5185\u90e8 IP \u7684 8000 \u7aef\u53e3\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6bcf\u6b21\u4fee\u6539\u9879\u76ee\u4ee3\u7801\uff0c\u4e0d\u7528\u91cd\u65b0\u542f\u52a8django\u670d\u52a1\u3002\u7136\u800c\uff0c\u4e00\u4e9b\u52a8\u4f5c\uff0c\u6bd4\u5982\u6dfb\u52a0\u65b0\u6587\u4ef6\uff0c\u5c06\u4e0d\u4f1a\u89e6\u53d1\u81ea\u52a8\u91cd\u65b0\u52a0\u8f7d\uff0c\u8fd9\u65f6\u4f60\u5f97\u81ea\u5df1\u624b\u52a8\u91cd\u542f\u670d\u52a1\u5668\u3002")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u521b\u5efa\u5e94\u7528")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u9879\u76ee VS \u5e94\u7528"),(0,l.kt)("p",{parentName:"blockquote"},"\u9879\u76ee\u548c\u5e94\u7528\u6709\u4ec0\u4e48\u533a\u522b\uff1f\u5e94\u7528\u662f\u4e00\u4e2a\u4e13\u95e8\u505a\u67d0\u4ef6\u4e8b\u7684\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\u2014\u2014\u6bd4\u5982\u535a\u5ba2\u7cfb\u7edf\uff0c\u6216\u8005\u516c\u5171\u8bb0\u5f55\u7684\u6570\u636e\u5e93\uff0c\u6216\u8005\u5c0f\u578b\u7684\u6295\u7968\u7a0b\u5e8f\u3002\u9879\u76ee\u5219\u662f\u4e00\u4e2a\u7f51\u7ad9\u4f7f\u7528\u7684\u914d\u7f6e\u548c\u5e94\u7528\u7684\u96c6\u5408\u3002\u9879\u76ee\u53ef\u4ee5\u5305\u542b\u5f88\u591a\u4e2a\u5e94\u7528\u3002\u5e94\u7528\u53ef\u4ee5\u88ab\u5f88\u591a\u4e2a\u9879\u76ee\u4f7f\u7528\u3002")),(0,l.kt)("p",null,"\u5728manage.py\u76ee\u5f55\u4e0b\u8fd0\u884c\u547d\u4ee4\uff0c\u4e5f\u53ef\u4ee5\u6709\u8def\u5f84\u8868\u793amanage.py\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"python manage.py startapp app_name")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u521b\u5efa\u6a21\u578b")),(0,l.kt)("p",null,"\u4e00\u4e2a\u6a21\u578b\u7c7b\u4ee3\u8868\u4e00\u5f20\u6570\u636e\u5e93\u8868\uff0c\u4e00\u822c\u5199\u5728app\u76ee\u5f55\u4e0b\u7684models.py\u6587\u4ef6\u4e2d\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.db import models\n\n\nclass Question(models.Model):\n    question_text = models.CharField(max_length=200)\n    pub_date = models.DateTimeField('date published')\n\n\nclass Choice(models.Model):\n    question = models.ForeignKey(Question, on_delete=models.CASCADE)\n    choice_text = models.CharField(max_length=200)\n    votes = models.IntegerField(default=0)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6570\u636e\u5e93")),(0,l.kt)("p",null,"\u751f\u6210\u8fc1\u79fb\u6587\u4ef6"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"python manage.py makemigrations [app_name]")),(0,l.kt)("p",null,"\u67e5\u770bsql\uff0c\u5148\u770b\u770b\u5728\u8fc1\u79fb\u7684\u65f6\u5019\u5b9e\u9645\u6267\u884c\u7684SQL\u8bed\u53e5\u662f\u4ec0\u4e48\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"python manage.py sqlmigrate polls 0001")),(0,l.kt)("p",null,"\u6267\u884c\u8fc1\u79fb"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"python manage.py migrate")),(0,l.kt)("h2",{id:"2-\u9879\u76ee\u7ed3\u6784"},"2. \u9879\u76ee\u7ed3\u6784"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tex"},"mysite/\n    manage.py\n    mysite/\n        __init__.py\n        settings.py\n        urls.py\n        asgi.py\n        wsgi.py\n    # \u5e94\u7528\n    polls/\n        __init__.py\n        admin.py\n        apps.py\n        migrations/\n            __init__.py\n        models.py\n        tests.py\n        views.py\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6700\u5916\u5c42\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"mysite/")," \u6839\u76ee\u5f55\u53ea\u662f\u4f60\u9879\u76ee\u7684\u5bb9\u5668\uff0c \u6839\u76ee\u5f55\u540d\u79f0\u5bf9Django\u6ca1\u6709\u5f71\u54cd\uff0c\u4f60\u53ef\u4ee5\u5c06\u5b83\u91cd\u547d\u540d\u4e3a\u4efb\u4f55\u4f60\u559c\u6b22\u7684\u540d\u79f0\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"manage.py"),": \u4e00\u4e2a\u8ba9\u4f60\u7528\u5404\u79cd\u65b9\u5f0f\u7ba1\u7406 Django \u9879\u76ee\u7684\u547d\u4ee4\u884c\u5de5\u5177\u3002\u4f60\u53ef\u4ee5\u9605\u8bfb ",(0,l.kt)("a",{parentName:"li",href:"https://docs.djangoproject.com/zh-hans/3.0/ref/django-admin/"},"django-admin and manage.py")," \u83b7\u53d6\u6240\u6709 ",(0,l.kt)("inlineCode",{parentName:"li"},"manage.py")," \u7684\u7ec6\u8282\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u91cc\u9762\u4e00\u5c42\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"mysite/")," \u76ee\u5f55\u5305\u542b\u4f60\u7684\u9879\u76ee\uff0c\u5b83\u662f\u4e00\u4e2a\u7eaf Python \u5305\u3002\u5b83\u7684\u540d\u5b57\u5c31\u662f\u5f53\u4f60\u5f15\u7528\u5b83\u5185\u90e8\u4efb\u4f55\u4e1c\u897f\u65f6\u9700\u8981\u7528\u5230\u7684 Python \u5305\u540d\u3002 (\u6bd4\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"mysite.urls"),")."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"mysite/__init__.py"),"\uff1a\u4e00\u4e2a\u7a7a\u6587\u4ef6\uff0c\u544a\u8bc9 Python \u8fd9\u4e2a\u76ee\u5f55\u5e94\u8be5\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a Python \u5305\u3002\u5982\u679c\u4f60\u662f Python \u521d\u5b66\u8005\uff0c\u9605\u8bfb\u5b98\u65b9\u6587\u6863\u4e2d\u7684 ",(0,l.kt)("a",{parentName:"li",href:"https://docs.python.org/3/tutorial/modules.html#tut-packages"},"\u66f4\u591a\u5173\u4e8e\u5305\u7684\u77e5\u8bc6"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"mysite/settings.py"),"\uff1aDjango \u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u5982\u679c\u4f60\u60f3\u77e5\u9053\u8fd9\u4e2a\u6587\u4ef6\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u8bf7\u67e5\u770b ",(0,l.kt)("a",{parentName:"li",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/settings/"},"Django \u914d\u7f6e")," \u4e86\u89e3\u7ec6\u8282\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"mysite/urls.py"),"\uff1aDjango \u9879\u76ee\u7684 URL \u58f0\u660e\uff0c\u5c31\u50cf\u4f60\u7f51\u7ad9\u7684\u201c\u76ee\u5f55\u201d\u3002\u9605\u8bfb ",(0,l.kt)("a",{parentName:"li",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/http/urls/"},"URL\u8c03\u5ea6\u5668")," \u6587\u6863\u6765\u83b7\u53d6\u66f4\u591a\u5173\u4e8e URL \u7684\u5185\u5bb9\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"mysite/asgi.py"),"\uff1a\u4f5c\u4e3a\u4f60\u7684\u9879\u76ee\u7684\u8fd0\u884c\u5728 ASGI \u517c\u5bb9\u7684Web\u670d\u52a1\u5668\u4e0a\u7684\u5165\u53e3\u3002\u9605\u8bfb ",(0,l.kt)("a",{parentName:"li",href:"https://docs.djangoproject.com/zh-hans/3.0/howto/deployment/wsgi/"},"\u5982\u4f55\u4f7f\u7528 WSGI \u8fdb\u884c\u90e8\u7f72")," \u4e86\u89e3\u66f4\u591a\u7ec6\u8282\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"mysite/wsgi.py"),"\uff1a\u4f5c\u4e3a\u4f60\u7684\u9879\u76ee\u7684\u8fd0\u884c\u5728 WSGI \u517c\u5bb9\u7684Web\u670d\u52a1\u5668\u4e0a\u7684\u5165\u53e3\u3002\u9605\u8bfb ",(0,l.kt)("a",{parentName:"li",href:"https://docs.djangoproject.com/zh-hans/3.0/howto/deployment/wsgi/"},"\u5982\u4f55\u4f7f\u7528 WSGI \u8fdb\u884c\u90e8\u7f72")," \u4e86\u89e3\u66f4\u591a\u7ec6\u8282\u3002")),(0,l.kt)("h2",{id:"3-\u8def\u7531\u914d\u7f6e"},"3. \u8def\u7531\u914d\u7f6e"),(0,l.kt)("p",null,"\u4e3a\u4e86\u7ed9\u4e00\u4e2a\u5e94\u7528\u8bbe\u8ba1URL\uff0c\u4f60\u9700\u8981\u521b\u5efa\u4e00\u4e2aPython \u6a21\u5757\uff0c\u901a\u5e38\u88ab\u79f0\u4e3a",(0,l.kt)("strong",{parentName:"p"},"URLconf"),"(URL configuration)\u3002\u8fd9\u4e2a\u6a21\u5757\u662f\u7eaf\u7cb9\u7684Python \u4ee3\u7801\uff0c\u5305\u542bURL \u6a21\u5f0f(\u7b80\u5355\u7684\u6b63\u5219\u8868\u8fbe\u5f0f)\u5230Python \u51fd\u6570(\u4f60\u7684\u89c6\u56fe)\u7684\u7b80\u5355\u6620\u5c04\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9644\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/http/urls/#url-dispatcher"},"\u8def\u7531\u914d\u7f6e\u5b98\u65b9\u6587\u6863")),(0,l.kt)("li",{parentName:"ul"},"Django \u8fd8\u63d0\u4f9b\u6839\u636e\u5f53\u524d\u8bed\u8a00\u7ffb\u8bd1URL \u7684\u4e00\u79cd\u65b9\u6cd5\u3002\u66f4\u591a\u4fe1\u606f\u53c2\u89c1 ",(0,l.kt)("a",{parentName:"li",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/i18n/translation/#url-internationalization"},"\u56fd\u9645\u5316\u6587\u6863"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/http/urls/#how-django-processes-a-request"},"Django \u5982\u4f55\u5904\u7406\u4e00\u4e2a\u8bf7\u6c42"))),(0,l.kt)("h3",{id:"31-\u7b80\u5355\u7684\u793a\u4f8b"},"3.1 \u7b80\u5355\u7684\u793a\u4f8b"),(0,l.kt)("p",null,"\u4e00\u4e2a\u8def\u7531\u914d\u7f6e\u6a21\u5757\u5c31\u662f\u4e00\u4e2aurlpatterns\u5217\u8868\uff0c\u5217\u8868\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u9879path\uff0c\u6bcf\u4e00\u9879path\u90fd\u662f\u4ee5path()\u7684\u5f62\u5f0f\u5b58\u5728\u3002"),(0,l.kt)("p",null,"path()\u65b9\u6cd5\u53ef\u4ee5\u63a5\u65364\u4e2a\u53c2\u6570\uff0c\u5176\u4e2d\u524d2\u4e2a\u662f\u5fc5\u987b\u7684\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"route"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"view"),"\uff0c\u4ee5\u53ca2\u4e2a\u53ef\u9009\u7684\u53c2\u6570\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"kwargs"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"name"),"\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.urls import path\n\nfrom . import views\n\nurlpatterns = [\n    path('articles/2003/', views.special_case_2003),\n    path('articles/<int:year>/', views.year_archive),\n    path('articles/<int:year>/<int:month>/', views.month_archive),\n    path('articles/<int:year>/<int:month>/<slug:slug>/', views.article_detail),\n]\n")),(0,l.kt)("p",null,"\u6ce8\u610f\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8981\u4ece URL \u4e2d\u53d6\u503c\uff0c\u4f7f\u7528\u5c16\u62ec\u53f7",(0,l.kt)("inlineCode",{parentName:"li"},"<>"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6355\u83b7\u7684\u503c\u53ef\u4ee5\u9009\u62e9\u6027\u5730\u5305\u542b\u8f6c\u6362\u5668\u7c7b\u578b\u3002\u6bd4\u5982\uff0c\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"<int:name>")," \u6765\u6355\u83b7\u6574\u578b\u53c2\u6570\u3002\u5982\u679c\u4e0d\u5305\u542b\u8f6c\u6362\u5668\uff0c\u5219\u4f1a\u5339\u914d\u9664\u4e86 ",(0,l.kt)("inlineCode",{parentName:"li"},"/")," \u5916\u7684\u4efb\u4f55\u5b57\u7b26\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u8fd9\u91cc\u4e0d\u9700\u8981\u6dfb\u52a0\u53cd\u659c\u6760\uff0c\u56e0\u4e3a\u6bcf\u4e2a URL \u90fd\u6709\u3002\u6bd4\u5982\uff0c\u5e94\u8be5\u662f ",(0,l.kt)("inlineCode",{parentName:"li"},"articles")," \u800c\u4e0d\u662f ",(0,l.kt)("inlineCode",{parentName:"li"},"/articles")," \u3002")),(0,l.kt)("p",null,"\u4e00\u4e9b\u8bf7\u6c42\u7684\u4f8b\u5b50\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/articles/2005/03/")," \u4f1a\u5339\u914d URL \u5217\u8868\u4e2d\u7684\u7b2c\u4e09\u9879\u3002Django \u4f1a\u8c03\u7528\u51fd\u6570 ",(0,l.kt)("inlineCode",{parentName:"li"},"views.month_archive(request, year=2005, month=3)")," \u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/articles/2003/")," \u5c06\u5339\u914d\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6a21\u5f0f\uff0c\u800c\u4e0d\u662f\u7b2c\u4e8c\u4e2a\u6a21\u5f0f\uff0c\u56e0\u4e3a\u6a21\u5f0f\u662f\u6309\u987a\u5e8f\u6d4b\u8bd5\u7684\uff0c\u800c\u7b2c\u4e00\u4e2a\u6a21\u5f0f\u662f\u7b2c\u4e00\u4e2a\u901a\u8fc7\u7684\u6d4b\u8bd5\u3002\u56e0\u6b64\u5982\u679c\u4f60\u9700\u8981\u7279\u522b\u5904\u7406\u4e00\u4e9b\u7279\u6b8a\u8def\u7531\uff0c\u53ef\u4ee5\u5148\u5199\u5728\u524d\u9762\u3002\u5728\u8fd9\u91cc\uff0cDjango\u5c06\u8c03\u7528\u8be5\u51fd\u6570",(0,l.kt)("inlineCode",{parentName:"li"},"views.special_case_2003(request)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/articles/2003")," \u4e0d\u4f1a\u5339\u914d\u8fd9\u4e9b\u6a21\u5f0f\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u6a21\u5f0f\u90fd\u8981\u6c42URL\u4ee5\u659c\u6760\u7ed3\u5c3e\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/articles/2003/03/building-a-django-site/")," \u4f1a\u5339\u914d URL \u5217\u8868\u4e2d\u7684\u6700\u540e\u4e00\u9879\u3002Django \u4f1a\u8c03\u7528\u51fd\u6570 ",(0,l.kt)("inlineCode",{parentName:"li"},'views.article_detail(request, year=2003, month=3, slug="building-a-django-site")')," \u3002")),(0,l.kt)("h3",{id:"32-\u8def\u5f84\u8f6c\u6362\u5668"},"3.2 \u8def\u5f84\u8f6c\u6362\u5668"),(0,l.kt)("p",null,"\u4e0b\u9762\u7684\u8def\u5f84\u8f6c\u6362\u5668\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u6709\u6548\u7684\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"str")," - \u5339\u914d\u9664\u4e86 ",(0,l.kt)("inlineCode",{parentName:"li"},"'/'")," \u4e4b\u5916\u7684\u975e\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c\u8868\u8fbe\u5f0f\u5185\u4e0d\u5305\u542b\u8f6c\u6362\u5668\uff0c\u5219\u4f1a\u9ed8\u8ba4\u5339\u914d\u5b57\u7b26\u4e32\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"int")," - \u5339\u914d 0 \u6216\u4efb\u4f55\u6b63\u6574\u6570\u3002\u8fd4\u56de\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"li"},"int")," \u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"slug")," - \u5339\u914d\u4efb\u610f\u7531 ASCII \u5b57\u6bcd\u6216\u6570\u5b57\u4ee5\u53ca\u8fde\u5b57\u7b26\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\u7684\u77ed\u6807\u7b7e\u3002\u6bd4\u5982\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"building-your-1st-django-site")," \u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"uuid")," - \u5339\u914d\u4e00\u4e2a\u683c\u5f0f\u5316\u7684 UUID \u3002\u4e3a\u4e86\u9632\u6b62\u591a\u4e2a URL \u6620\u5c04\u5230\u540c\u4e00\u4e2a\u9875\u9762\uff0c\u5fc5\u987b\u5305\u542b\u7834\u6298\u53f7\u5e76\u4e14\u5b57\u7b26\u90fd\u4e3a\u5c0f\u5199\u3002\u6bd4\u5982\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"075194d3-6885-417e-a8a8-6c931e272f00"),"\u3002\u8fd4\u56de\u4e00\u4e2a ",(0,l.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/uuid.html#uuid.UUID"},(0,l.kt)("inlineCode",{parentName:"a"},"UUID"))," \u5b9e\u4f8b\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"path")," - \u5339\u914d\u975e\u7a7a\u5b57\u6bb5\uff0c\u5305\u62ec\u8def\u5f84\u5206\u9694\u7b26 ",(0,l.kt)("inlineCode",{parentName:"li"},"'/'")," \u3002\u5b83\u5141\u8bb8\u4f60\u5339\u914d\u5b8c\u6574\u7684 URL \u8def\u5f84\u800c\u4e0d\u662f\u50cf ",(0,l.kt)("inlineCode",{parentName:"li"},"str")," \u90a3\u6837\u5339\u914d URL \u7684\u4e00\u90e8\u5206\u3002")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9644"),"\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/http/urls/#registering-custom-path-converters"},"\u6ce8\u518c\u81ea\u5b9a\u4e49\u7684\u8def\u5f84\u8f6c\u6362\u5668")),(0,l.kt)("h3",{id:"33-\u6b63\u5219\u8868\u8fbe\u5f0f\u8def\u7531"},"3.3 \u6b63\u5219\u8868\u8fbe\u5f0f\u8def\u7531"),(0,l.kt)("p",null,"\u5982\u679c\u8def\u5f84\u548c\u8f6c\u5316\u5668\u8bed\u6cd5\u4e0d\u80fd\u5f88\u597d\u7684\u5b9a\u4e49\u4f60\u7684 URL \u6a21\u5f0f\uff0c\u4f60\u53ef\u4ee5\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u8981\u8fd9\u6837\u505a\uff0c\u8bf7\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/ref/urls/#django.urls.re_path"},(0,l.kt)("inlineCode",{parentName:"a"},"re_path()"))," \u800c\u4e0d\u662f ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/ref/urls/#django.urls.path"},(0,l.kt)("inlineCode",{parentName:"a"},"path()"))," \u3002"),(0,l.kt)("p",null,"\u5728 Python \u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\uff0c\u547d\u540d\u6b63\u5219\u8868\u8fbe\u5f0f\u7ec4\u7684\u8bed\u6cd5\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"(?P<name>pattern)")," \uff0c\u5176\u4e2d ",(0,l.kt)("inlineCode",{parentName:"p"},"name")," \u662f\u7ec4\u540d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"pattern")," \u662f\u8981\u5339\u914d\u7684\u6a21\u5f0f\u3002"),(0,l.kt)("p",null,"\u8fd9\u91cc\u662f\u5148\u524d URLconf \u7684\u4e00\u4e9b\u4f8b\u5b50\uff0c\u73b0\u5728\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u91cd\u5199\u4e00\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.urls import path, re_path\n\nfrom . import views\n\nurlpatterns = [\n    path('articles/2003/', views.special_case_2003),\n    re_path(r'^articles/(?P<year>[0-9]{4})/$', views.year_archive),\n    re_path(r'^articles/(?P<year>[0-9]{4})/(?P<month>[0-9]{2})/$', views.month_archive),\n    re_path(r'^articles/(?P<year>[0-9]{4})/(?P<month>[0-9]{2})/(?P<slug>[\\w-]+)/$', views.article_detail),\n]\n")),(0,l.kt)("p",null,"\u8fd9\u5b9e\u73b0\u4e86\u4e0e\u524d\u9762\u793a\u4f8b\u5927\u81f4\u76f8\u540c\u7684\u529f\u80fd\uff0c\u9664\u4e86:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"^"),"\uff1a\u610f\u601d\u662f\u201c\u6a21\u5f0f\u5fc5\u987b\u4ece\u8fd9\u91cc\u5f00\u59cb\u201d"),(0,l.kt)("li",{parentName:"ul"},"\u5c06\u8981\u5339\u914d\u7684 URLs \u5c06\u7a0d\u53d7\u9650\u5236\u3002\u6bd4\u5982\uff0c10000 \u5e74\u5c06\u4e0d\u5728\u5339\u914d\uff0c\u56e0\u4e3a year \u88ab\u9650\u5236\u957f\u5ea6\u4e3a4\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u65e0\u8bba\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u54ea\u79cd\u5339\u914d\uff0c\u6bcf\u4e2a\u6355\u83b7\u7684\u53c2\u6570\u90fd\u4f5c\u4e3a\u5b57\u7b26\u4e32\u53d1\u9001\u5230\u89c6\u56fe\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4e3a\u4e86\u5b8c\u6210\u8fd9\u4e2a\u6a21\u5f0f\uff0c\u7b26\u53f7",(0,l.kt)("inlineCode",{parentName:"li"},"$"),"\u7684\u4f5c\u7528\u4e0e",(0,l.kt)("inlineCode",{parentName:"li"},"^"),"\u76f8\u53cd\uff0c\u8868\u793a\u201c\u6a21\u5f0f\u5fc5\u987b\u5728\u8fd9\u91cc\u7ed3\u675f\u201d\u3002")),(0,l.kt)("p",null,"\u5f53\u4ece\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/ref/urls/#django.urls.path"},(0,l.kt)("inlineCode",{parentName:"a"},"path()"))," \u5207\u6362\u5230 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/ref/urls/#django.urls.re_path"},(0,l.kt)("inlineCode",{parentName:"a"},"re_path()"))," \uff08\u53cd\u4e4b\u4ea6\u7136\uff09\uff0c\u8981\u7279\u522b\u6ce8\u610f\uff0c\u89c6\u56fe\u53c2\u6570\u7c7b\u578b\u53ef\u80fd\u53d1\u751f\u53d8\u5316\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u8c03\u6574\u4f60\u7684\u89c6\u56fe\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u672a\u547d\u540d\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u7ec4")),(0,l.kt)("p",null,"\u8fd8\u6709\u547d\u540d\u7ec4\u8bed\u6cd5\uff0c\u4f8b\u5982 ",(0,l.kt)("inlineCode",{parentName:"p"},"(?P<year>[0-9]{4})")," \uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u66f4\u77ed\u7684\u672a\u547d\u540d\u7ec4\uff0c\u4f8b\u5982 ",(0,l.kt)("inlineCode",{parentName:"p"},"([0-9]{4})")," \u3002"),(0,l.kt)("p",null,"\u4e0d\u662f\u7279\u522b\u63a8\u8350\u8fd9\u4e2a\u7528\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4f1a\u66f4\u5bb9\u6613\u5728\u5339\u914d\u7684\u9884\u671f\u542b\u4e49\u548c\u89c6\u56fe\u53c2\u6570\u4e4b\u95f4\u5f15\u53d1\u9519\u8bef\u3002"),(0,l.kt)("p",null,"\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff0c\u63a8\u8350\u5728\u7ed9\u5b9a\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u53ea\u4f7f\u7528\u4e00\u4e2a\u6837\u5f0f\u3002\u5f53\u6df7\u6742\u4e24\u79cd\u6837\u5f0f\u65f6\uff0c\u4efb\u4f55\u672a\u547d\u540d\u7684\u7ec4\u90fd\u4f1a\u88ab\u5ffd\u7565\uff0c\u800c\u4e14\u53ea\u6709\u547d\u540d\u7684\u7ec4\u624d\u4f1a\u4f20\u9012\u7ed9\u89c6\u56fe\u51fd\u6570\u3002"),(0,l.kt)("h3",{id:"34-\u5305\u542bapp\u7684urlconfs"},"3.4 \u5305\u542bapp\u7684URLconfs"),(0,l.kt)("p",null,"\u4efb\u4f55\u65f6\u5019\uff0c\u4f60\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"urlpatterns"),' \u90fd\u53ef\u4ee5 "include" \u5176\u5b83URLconf \u6a21\u5757\u3002\u8fd9\u5b9e\u9645\u4e0a\u5c06\u4e00\u90e8\u5206URL \u653e\u7f6e\u4e8e\u5176\u5b83URL \u4e0b\u9762\u3002'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.urls import include, path\n\nurlpatterns = [\n    # ... snip ...\n    path('community/', include('aggregator.urls')),\n    path('contact/', include('contact.urls')),\n    # ... snip ...\n]\n")),(0,l.kt)("p",null,"\u800c\u5f53\u5176\u4e2d\u67d0\u4e2aURL\u524d\u7f00\u88ab\u91cd\u590d\u4f7f\u7528\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"include"),"\u6765\u6539\u8fdb\uff0c\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.urls import include, path\nfrom . import views\n\nurlpatterns = [\n    path('<page_slug>-<page_id>/', include([\n        path('history/', views.history),\n        path('edit/', views.edit),\n        path('discuss/', views.discuss),\n        path('permissions/', views.permissions),\n    ])),\n]\n")),(0,l.kt)("p",null,"\u88ab\u5305\u542b\u7684URLconf \u4f1a\u6536\u5230\u6765\u81ea\u7236URLconf \u6355\u83b7\u7684\u4efb\u4f55\u53c2\u6570\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6355\u83b7\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"page_slug page_id")," \u53d8\u91cf\u5c06\u88ab\u5982\u671f\u4f20\u9012\u7ed9include()\u6307\u5411\u7684URLconf/View\u3002"),(0,l.kt)("h3",{id:"35-\u989d\u5916\u4f20\u53c2"},"3.5 \u989d\u5916\u4f20\u53c2"),(0,l.kt)("p",null,"URLconfs \u6709\u94a9\u5b50\u6765\u5141\u8bb8\u4f60\u628a\u5176\u4ed6\u53c2\u6570\u4f5c\u4e3a Python \u5b57\u5178\u6765\u4f20\u9012\u7ed9\u89c6\u56fe\u51fd\u6570\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"path()"),"\u51fd\u6570\u53ef\u5e26\u6709\u53ef\u9009\u7684\u7b2c\u4e09\u53c2\u6570\uff08\u5fc5\u987b\u662f\u5b57\u5178\uff09\uff0c\u4f20\u9012\u5230\u89c6\u56fe\u51fd\u6570\u91cc\u3002"),(0,l.kt)("p",null,"\u4f46\u662f\u89c6\u56fe\u51fd\u6570\u5fc5\u987b\u8981\u6709\u76f8\u5173\u7684\u53c2\u6570\u63a5\u6536\uff0c\u8981\u4e0d\u7136\u5c31\u4f1a\u51fa\u9519\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('blog/<int:year>/', views.year_archive, {'foo': 'bar'}),\n    path('blog/', include('inner'), {'blog_id': 3}),\n]\n")),(0,l.kt)("h3",{id:"36-\u547d\u540d-url-\u6a21\u5f0f"},"3.6 \u547d\u540d URL \u6a21\u5f0f",(0,l.kt)("a",{parentName:"h3",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/http/urls/#naming-url-patterns"},"\xb6")),(0,l.kt)("h2",{id:"4-\u89c6\u56fe"},"4. \u89c6\u56fe"),(0,l.kt)("p",null,"\u4e00\u4e2a\u89c6\u56fe\u51fd\u6570\uff08\u6216\u7b80\u79f0\u4e3a\u89c6\u56fe\uff09\u662f\u4e00\u4e2a Python \u51fd\u6570/\u7c7b\uff0c\u5b83\u63a5\u53d7 Web \u8bf7\u6c42\u5e76\u8fd4\u56de\u4e00\u4e2a Web \u54cd\u5e94\u3002\u8fd9\u4e2a\u54cd\u5e94\u53ef\u4ee5\u662f Web \u9875\u9762\u7684 HTML \u5185\u5bb9\uff0c\u6216\u8005\u91cd\u5b9a\u5411\uff0c\u6216\u8005404\u9519\u8bef\uff0c\u6216\u8005 XML \u6587\u6863\uff0c\u6216\u4e00\u4e2a\u56fe\u7247...\u6216\u662f\u4efb\u4f55\u5185\u5bb9\u3002\u89c6\u56fe\u672c\u8eab\u5305\u542b\u8fd4\u56de\u54cd\u5e94\u6240\u9700\u7684\u4efb\u4f55\u903b\u8f91\u3002\u8fd9\u4e2a\u4ee3\u7801\u53ef\u4ee5\u5b58\u5728\u4efb\u4f55\u5730\u65b9\uff0c\u53ea\u8981\u5b83\u5728\u4f60\u7684 Python \u8def\u5f84\u4e0a\u5c31\u884c\u3002\u53ef\u4ee5\u8bf4\uff0c\u4e0d\u9700\u8981\u5176\u4ed6\u4e1c\u897f\uff0c\u8fd9\u91cc\u5e76\u6ca1\u6709\u9b54\u6cd5\u3002\u4e3a\u4e86\u5c06\u4ee3\u7801\u653e\u7f6e\u5728\u67d0\u5904\uff0c\u7ea6\u5b9a\u5c06\u89c6\u56fe\u653e\u5728\u540d\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"views.py")," \u7684\u6587\u4ef6\u91cc\uff0c\u8fd9\u4e2a\u6587\u4ef6\u653e\u7f6e\u5728\u9879\u76ee\u6216\u5e94\u7528\u76ee\u5f55\u91cc\u3002"),(0,l.kt)("p",null,"\u6bcf\u4e2a\u89c6\u56fe\u51fd\u6570\u90fd\u5c06 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/ref/request-response/#django.http.HttpRequest"},(0,l.kt)("inlineCode",{parentName:"a"},"HttpRequest"))," \u5bf9\u8c61\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u901a\u5e38\u540d\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"request")," \u3002"),(0,l.kt)("p",null,"\u89c6\u56fe\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u751f\u6210\u7684\u54cd\u5e94\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/ref/request-response/#django.http.HttpResponse"},(0,l.kt)("inlineCode",{parentName:"a"},"HttpResponse"))," \u5bf9\u8c61\u3002\u6bcf\u4e2a\u89c6\u56fe\u51fd\u6570\u90fd\u8981\u8fd4\u56de ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/ref/request-response/#django.http.HttpResponse"},(0,l.kt)("inlineCode",{parentName:"a"},"HttpResponse"))," \u5bf9\u8c61\u3002"),(0,l.kt)("h3",{id:"\u89c6\u56fe\u88c5\u9970\u5668"},"\u89c6\u56fe\u88c5\u9970\u5668",(0,l.kt)("a",{parentName:"h3",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/http/decorators/#module-django.views.decorators.http"},"\xb6")),(0,l.kt)("p",null,"Django \u63d0\u4f9b\u5f88\u591a\u88c5\u9970\u5668\uff0c\u5b83\u4eec\u53ef\u4ee5\u4e3a\u89c6\u56fe\u652f\u6301\u591a\u79cd HTTP \u7279\u6027\u3002\u4f4d\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"django.views.decorators"),"\u5305\u4e0b\u3002"),(0,l.kt)("p",null,"\u9650\u5236http\u7684\u8bf7\u6c42\u65b9\u5f0f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"require_http_methods(request_method_list)")," \u8981\u6c42\u89c6\u56fe\u53ea\u63a5\u53d7\u7279\u5b9a\u7684\u8bf7\u6c42\u65b9\u6cd5\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"require_GET()"),"\u88c5\u9970\u5668\u53ef\u4ee5\u8981\u6c42\u89c6\u56fe\u53ea\u63a5\u53d7 GET \u65b9\u6cd5\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"require_POST()"),"\u88c5\u9970\u5668\u53ef\u4ee5\u8981\u6c42\u89c6\u56fe\u53ea\u63a5\u53d7 POST \u65b9\u6cd5\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"require_safe()"),"\u88c5\u9970\u5668\u53ef\u4ee5\u8981\u6c42\u89c6\u56fe\u53ea\u63a5\u6536 GET \u548c HEAD \u65b9\u6cd5\u3002\u8fd9\u4e9b\u65b9\u6cd5\u901a\u5e38\u88ab\u8ba4\u4e3a\u662f\u5b89\u5168\u7684\u3002")),(0,l.kt)("p",null,"\u7528\u6cd5\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from django.views.decorators.http import require_http_methods\n\n@require_http_methods(["GET", "POST"])\ndef my_view(request):\n    # I can assume now that only GET or POST requests make it this far\n    # ...\n    pass\n')),(0,l.kt)("h2",{id:"4-\u6a21\u578b\u5c42"},"4. \u6a21\u578b\u5c42"),(0,l.kt)("h3",{id:"41-\u5e38\u89c1\u5b57\u6bb5\u7c7b\u578b"},"4.1 \u5e38\u89c1\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("p",null,"\u4e0b\u8868\u5217\u51fa\u4e86\u6240\u6709Django\u5185\u7f6e\u7684\u5b57\u6bb5\u7c7b\u578b\uff0c\u4f46\u4e0d\u5305\u62ec\u5173\u7cfb\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"AutoField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e00\u4e2a\u81ea\u52a8\u589e\u52a0\u7684\u6574\u6570\u7c7b\u578b\u5b57\u6bb5\u3002\u901a\u5e38\u4f60\u4e0d\u9700\u8981\u81ea\u5df1\u7f16\u5199\u5b83\uff0cDjango\u4f1a\u81ea\u52a8\u5e2e\u4f60\u6dfb\u52a0\u5b57\u6bb5\uff1a",(0,l.kt)("inlineCode",{parentName:"td"},"id = models.AutoField(primary_key=True)"),"\uff0c\u8fd9\u662f\u4e00\u4e2a\u81ea\u589e\u5b57\u6bb5\uff0c\u4ece1\u5f00\u59cb\u8ba1\u6570\u3002\u5982\u679c\u4f60\u975e\u8981\u81ea\u5df1\u8bbe\u7f6e\u4e3b\u952e\uff0c\u90a3\u4e48\u8bf7\u52a1\u5fc5\u5c06\u5b57\u6bb5\u8bbe\u7f6e\u4e3a",(0,l.kt)("inlineCode",{parentName:"td"},"primary_key=True"),"\u3002Django\u5728\u4e00\u4e2a\u6a21\u578b\u4e2d\u53ea\u5141\u8bb8\u6709\u4e00\u4e2a\u81ea\u589e\u5b57\u6bb5\uff0c\u5e76\u4e14\u8be5\u5b57\u6bb5\u5fc5\u987b\u4e3a\u4e3b\u952e\uff01")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"BigAutoField"),(0,l.kt)("td",{parentName:"tr",align:null},"64\u4f4d\u6574\u6570\u7c7b\u578b\u81ea\u589e\u5b57\u6bb5\uff0c\u6570\u5b57\u8303\u56f4\u66f4\u5927\uff0c\u4ece1\u52309223372036854775807")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"BigIntegerField"),(0,l.kt)("td",{parentName:"tr",align:null},"64\u4f4d\u6574\u6570\u5b57\u6bb5\uff08\u770b\u6e05\u695a\uff0c\u975e\u81ea\u589e\uff09\uff0c\u7c7b\u4f3cIntegerField \uff0c-9223372036854775808 \u52309223372036854775807\u3002\u5728Django\u7684\u6a21\u677f\u8868\u5355\u91cc\u4f53\u73b0\u4e3a\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"td"},"NumberInput"),"\u6807\u7b7e\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"BinaryField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e8c\u8fdb\u5236\u6570\u636e\u7c7b\u578b\u3002\u8f83\u5c11\u4f7f\u7528\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"BooleanField")),(0,l.kt)("td",{parentName:"tr",align:null},"\u5e03\u5c14\u503c\u7c7b\u578b\u3002\u9ed8\u8ba4\u503c\u662fNone\u3002\u5728HTML\u8868\u5355\u4e2d\u4f53\u73b0\u4e3aCheckboxInput\u6807\u7b7e\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u53c2\u6570null=True\uff0c\u5219\u8868\u73b0\u4e3aNullBooleanSelect\u9009\u62e9\u6846\u3002\u53ef\u4ee5\u63d0\u4f9bdefault\u53c2\u6570\u503c\uff0c\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"CharField")),(0,l.kt)("td",{parentName:"tr",align:null},"\u6700\u5e38\u7528\u7684\u7c7b\u578b\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\u3002\u5fc5\u987b\u63a5\u6536\u4e00\u4e2amax_length\u53c2\u6570\uff0c\u8868\u793a\u5b57\u7b26\u4e32\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7\u8be5\u503c\u3002\u9ed8\u8ba4\u7684\u8868\u5355\u6807\u7b7e\u662ftext input\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"DateField")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"class DateField(auto_now=False, auto_now_add=False, **options)")," , \u65e5\u671f\u7c7b\u578b\u3002\u4e00\u4e2aPython\u4e2d\u7684datetime.date\u7684\u5b9e\u4f8b\u3002\u5728HTML\u4e2d\u8868\u73b0\u4e3aDateInput\u6807\u7b7e\u3002\u5728admin\u540e\u53f0\u4e2d\uff0cDjango\u4f1a\u5e2e\u4f60\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2aJS\u65e5\u5386\u8868\u548c\u4e00\u4e2a\u201cToday\u201d\u5feb\u6377\u65b9\u5f0f\uff0c\u4ee5\u53ca\u9644\u52a0\u7684\u65e5\u671f\u5408\u6cd5\u6027\u9a8c\u8bc1\u3002\u4e24\u4e2a\u91cd\u8981\u53c2\u6570\uff1a\uff08\u53c2\u6570\u4e92\u65a5\uff0c\u4e0d\u80fd\u5171\u5b58\uff09 ",(0,l.kt)("inlineCode",{parentName:"td"},"auto_now"),":\u6bcf\u5f53\u5bf9\u8c61\u88ab\u4fdd\u5b58\u65f6\u5c06\u5b57\u6bb5\u8bbe\u4e3a\u5f53\u524d\u65e5\u671f\uff0c\u5e38\u7528\u4e8e\u4fdd\u5b58\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002",(0,l.kt)("inlineCode",{parentName:"td"},"auto_now_add"),"\uff1a\u6bcf\u5f53\u5bf9\u8c61\u88ab\u521b\u5efa\u65f6\uff0c\u8bbe\u4e3a\u5f53\u524d\u65e5\u671f\uff0c\u5e38\u7528\u4e8e\u4fdd\u5b58\u521b\u5efa\u65e5\u671f(\u6ce8\u610f\uff0c\u5b83\u662f\u4e0d\u53ef\u4fee\u6539\u7684)\u3002\u8bbe\u7f6e\u4e0a\u9762\u4e24\u4e2a\u53c2\u6570\u5c31\u76f8\u5f53\u4e8e\u7ed9field\u6dfb\u52a0\u4e86",(0,l.kt)("inlineCode",{parentName:"td"},"editable=False"),"\u548c",(0,l.kt)("inlineCode",{parentName:"td"},"blank=True"),"\u5c5e\u6027\u3002\u5982\u679c\u60f3\u5177\u6709\u4fee\u6539\u5c5e\u6027\uff0c\u8bf7\u7528default\u53c2\u6570\u3002\u4f8b\u5b50\uff1a",(0,l.kt)("inlineCode",{parentName:"td"},"pub_time = models.DateField(auto_now_add=True)"),"\uff0c\u81ea\u52a8\u6dfb\u52a0\u53d1\u5e03\u65f6\u95f4\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DateTimeField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u65e5\u671f\u65f6\u95f4\u7c7b\u578b\u3002Python\u7684datetime.datetime\u7684\u5b9e\u4f8b\u3002\u4e0eDateField\u76f8\u6bd4\u5c31\u662f\u591a\u4e86\u5c0f\u65f6\u3001\u5206\u548c\u79d2\u7684\u663e\u793a\uff0c\u5176\u5b83\u529f\u80fd\u3001\u53c2\u6570\u3001\u7528\u6cd5\u3001\u9ed8\u8ba4\u503c\u7b49\u7b49\u90fd\u4e00\u6837\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DecimalField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fa\u5b9a\u7cbe\u5ea6\u7684\u5341\u8fdb\u5236\u5c0f\u6570\u3002\u76f8\u5f53\u4e8ePython\u7684Decimal\u5b9e\u4f8b\uff0c\u5fc5\u987b\u63d0\u4f9b\u4e24\u4e2a\u6307\u5b9a\u7684\u53c2\u6570\uff01\u53c2\u6570",(0,l.kt)("inlineCode",{parentName:"td"},"max_digits"),"\uff1a\u6700\u5927\u7684\u4f4d\u6570\uff0c\u5fc5\u987b\u5927\u4e8e\u6216\u7b49\u4e8e\u5c0f\u6570\u70b9\u4f4d\u6570 \u3002",(0,l.kt)("inlineCode",{parentName:"td"},"decimal_places"),"\uff1a\u5c0f\u6570\u70b9\u4f4d\u6570\uff0c\u7cbe\u5ea6\u3002 \u5f53",(0,l.kt)("inlineCode",{parentName:"td"},"localize=False"),"\u65f6\uff0c\u5b83\u5728HTML\u8868\u73b0\u4e3aNumberInput\u6807\u7b7e\uff0c\u5426\u5219\u662ftextInput\u7c7b\u578b\u3002\u4f8b\u5b50\uff1a\u50a8\u5b58\u6700\u5927\u4e0d\u8d85\u8fc7999\uff0c\u5e26\u67092\u4f4d\u5c0f\u6570\u4f4d\u7cbe\u5ea6\u7684\u6570\uff0c\u5b9a\u4e49\u5982\u4e0b\uff1a",(0,l.kt)("inlineCode",{parentName:"td"},"models.DecimalField(..., max_digits=5, decimal_places=2)"),"\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DurationField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6301\u7eed\u65f6\u95f4\u7c7b\u578b\u3002\u5b58\u50a8\u4e00\u5b9a\u671f\u95f4\u7684\u65f6\u95f4\u957f\u5ea6\u3002\u7c7b\u4f3cPython\u4e2d\u7684timedelta\u3002\u5728\u4e0d\u540c\u7684\u6570\u636e\u5e93\u5b9e\u73b0\u4e2d\u6709\u4e0d\u540c\u7684\u8868\u793a\u65b9\u6cd5\u3002\u5e38\u7528\u4e8e\u8fdb\u884c\u65f6\u95f4\u4e4b\u95f4\u7684\u52a0\u51cf\u8fd0\u7b97\u3002\u4f46\u662f\u5c0f\u5fc3\u4e86\uff0c\u8fd9\u91cc\u6709\u5751\uff0cPostgreSQL\u7b49\u6570\u636e\u5e93\u4e4b\u95f4\u6709\u517c\u5bb9\u6027\u95ee\u9898\uff01")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"EmailField")),(0,l.kt)("td",{parentName:"tr",align:null},"\u90ae\u7bb1\u7c7b\u578b\uff0c\u9ed8\u8ba4max_length\u6700\u5927\u957f\u5ea6254\u4f4d\u3002\u4f7f\u7528\u8fd9\u4e2a\u5b57\u6bb5\u7684\u597d\u5904\u662f\uff0c\u53ef\u4ee5\u4f7f\u7528Django\u5185\u7f6e\u7684EmailValidator\u8fdb\u884c\u90ae\u7bb1\u683c\u5f0f\u5408\u6cd5\u6027\u9a8c\u8bc1\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"FileField")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"class FileField(upload_to=None, max_length=100, **options)"),"\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b\uff0c\u540e\u9762\u5355\u72ec\u4ecb\u7ecd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"FilePathField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6587\u4ef6\u8def\u5f84\u7c7b\u578b\uff0c\u540e\u9762\u5355\u72ec\u4ecb\u7ecd")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"FloatField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d6e\u70b9\u6570\u7c7b\u578b\uff0c\u5bf9\u5e94Python\u7684float\u3002\u53c2\u8003\u6574\u6570\u7c7b\u578b\u5b57\u6bb5\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"ImageField")),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fe\u50cf\u7c7b\u578b\uff0c\u540e\u9762\u5355\u72ec\u4ecb\u7ecd\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"IntegerField")),(0,l.kt)("td",{parentName:"tr",align:null},"\u6574\u6570\u7c7b\u578b\uff0c\u6700\u5e38\u7528\u7684\u5b57\u6bb5\u4e4b\u4e00\u3002\u53d6\u503c\u8303\u56f4-2147483648\u52302147483647\u3002\u5728HTML\u4e2d\u8868\u73b0\u4e3aNumberInput\u6216\u8005TextInput\u6807\u7b7e\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"GenericIPAddressField")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"class GenericIPAddressField(protocol='both', unpack_ipv4=False, **options)"),",IPV4\u6216\u8005IPV6\u5730\u5740\uff0c\u5b57\u7b26\u4e32\u5f62\u5f0f\uff0c\u4f8b\u5982",(0,l.kt)("inlineCode",{parentName:"td"},"192.0.2.30"),"\u6216\u8005",(0,l.kt)("inlineCode",{parentName:"td"},"2a02:42fe::4"),"\u3002\u5728HTML\u4e2d\u8868\u73b0\u4e3aTextInput\u6807\u7b7e\u3002\u53c2\u6570",(0,l.kt)("inlineCode",{parentName:"td"},"protocol"),"\u9ed8\u8ba4\u503c\u4e3a\u2018both\u2019\uff0c\u53ef\u9009\u2018IPv4\u2019\u6216\u8005\u2018IPv6\u2019\uff0c\u8868\u793a\u4f60\u7684IP\u5730\u5740\u7c7b\u578b\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JSONField"),(0,l.kt)("td",{parentName:"tr",align:null},"JSON\u7c7b\u578b\u5b57\u6bb5\u3002Django3.1\u65b0\u589e\u3002\u7b7e\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"td"},"class JSONField(encoder=None,decoder=None,**options)"),"\u3002\u5176\u4e2d\u7684encoder\u548cdecoder\u4e3a\u53ef\u9009\u7684\u7f16\u7801\u5668\u548c\u89e3\u7801\u5668\uff0c\u7528\u4e8e\u81ea\u5b9a\u4e49\u7f16\u7801\u548c\u89e3\u7801\u65b9\u5f0f\u3002\u5982\u679c\u4e3a\u8be5\u5b57\u6bb5\u63d0\u4f9bdefault\u503c\uff0c\u8bf7\u52a1\u5fc5\u4fdd\u8bc1\u8be5\u503c\u662f\u4e2a\u4e0d\u53ef\u53d8\u7684\u5bf9\u8c61\uff0c\u6bd4\u5982\u5b57\u7b26\u4e32\u5bf9\u8c61\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"PositiveBigIntegerField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6b63\u7684\u5927\u6574\u6570\uff0c0\u52309223372036854775807")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"PositiveIntegerField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6b63\u6574\u6570\uff0c\u4ece0\u52302147483647")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"PositiveSmallIntegerField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8f83\u5c0f\u7684\u6b63\u6574\u6570\uff0c\u4ece0\u523032767")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SlugField"),(0,l.kt)("td",{parentName:"tr",align:null},"slug\u662f\u4e00\u4e2a\u65b0\u95fb\u884c\u4e1a\u7684\u672f\u8bed\u3002\u4e00\u4e2aslug\u5c31\u662f\u4e00\u4e2a\u67d0\u79cd\u4e1c\u897f\u7684\u7b80\u77ed\u6807\u7b7e\uff0c\u5305\u542b\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u6216\u8005\u8fde\u63a5\u7ebf\uff0c\u901a\u5e38\u7528\u4e8eURLs\u4e2d\u3002\u53ef\u4ee5\u8bbe\u7f6emax_length\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a50\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SmallAutoField"),(0,l.kt)("td",{parentName:"tr",align:null},"Django3.0\u65b0\u589e\u3002\u7c7b\u4f3cAutoField\uff0c\u4f46\u662f\u53ea\u5141\u8bb81\u523032767\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SmallIntegerField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5c0f\u6574\u6570\uff0c\u5305\u542b-32768\u523032767\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"TextField")),(0,l.kt)("td",{parentName:"tr",align:null},"\u7528\u4e8e\u50a8\u5b58\u5927\u91cf\u7684\u6587\u672c\u5185\u5bb9\uff0c\u5728HTML\u4e2d\u8868\u73b0\u4e3aTextarea\u6807\u7b7e\uff0c\u6700\u5e38\u7528\u7684\u5b57\u6bb5\u7c7b\u578b\u4e4b\u4e00\uff01\u5982\u679c\u4f60\u4e3a\u5b83\u8bbe\u7f6e\u4e00\u4e2amax_length\u53c2\u6570\uff0c\u90a3\u4e48\u5728\u524d\u7aef\u9875\u9762\u4e2d\u4f1a\u53d7\u5230\u8f93\u5165\u5b57\u7b26\u6570\u91cf\u9650\u5236\uff0c\u7136\u800c\u5728\u6a21\u578b\u548c\u6570\u636e\u5e93\u5c42\u9762\u5374\u4e0d\u53d7\u5f71\u54cd\u3002\u53ea\u6709CharField\u624d\u80fd\u540c\u65f6\u4f5c\u7528\u4e8e\u4e24\u8005\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"TimeField"),(0,l.kt)("td",{parentName:"tr",align:null},"\u65f6\u95f4\u5b57\u6bb5\uff0cPython\u4e2ddatetime.time\u7684\u5b9e\u4f8b\u3002\u63a5\u6536\u540cDateField\u4e00\u6837\u7684\u53c2\u6570\uff0c\u53ea\u4f5c\u7528\u4e8e\u5c0f\u65f6\u3001\u5206\u548c\u79d2\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"URLField")),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e00\u4e2a\u7528\u4e8e\u4fdd\u5b58URL\u5730\u5740\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u9ed8\u8ba4\u6700\u5927\u957f\u5ea6200\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"UUIDField")),(0,l.kt)("td",{parentName:"tr",align:null},"\u7528\u4e8e\u4fdd\u5b58\u901a\u7528\u552f\u4e00\u8bc6\u522b\u7801\uff08Universally Unique Identifier\uff09\u7684\u5b57\u6bb5\u3002\u4f7f\u7528Python\u7684UUID\u7c7b\u3002\u5728PostgreSQL\u6570\u636e\u5e93\u4e2d\u4fdd\u5b58\u4e3auuid\u7c7b\u578b\uff0c\u5176\u5b83\u6570\u636e\u5e93\u4e2d\u4e3achar(32)\u3002\u8fd9\u4e2a\u5b57\u6bb5\u662f\u81ea\u589e\u4e3b\u952e\u7684\u6700\u4f73\u66ff\u4ee3\u54c1\uff0c\u540e\u9762\u6709\u4f8b\u5b50\u5c55\u793a\u3002")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"1.FileField")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"class FileField(upload_to=None, max_length=100, **options)\n")),(0,l.kt)("p",null,"\u4e0a\u4f20\u6587\u4ef6\u5b57\u6bb5\uff08\u4e0d\u80fd\u8bbe\u7f6e\u4e3a\u4e3b\u952e\uff09\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u5b57\u6bb5\u5728HTML\u4e2d\u8868\u73b0\u4e3a\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"ClearableFileInput"),"\u6807\u7b7e\u3002\u5728\u6570\u636e\u5e93\u5185\uff0c\u6211\u4eec\u5b9e\u9645\u4fdd\u5b58\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u9ed8\u8ba4\u6700\u5927\u957f\u5ea6100\uff0c\u53ef\u4ee5\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"max_length"),"\u53c2\u6570\u81ea\u5b9a\u4e49\u3002\u771f\u5b9e\u7684\u6587\u4ef6\u662f\u4fdd\u5b58\u5728\u670d\u52a1\u5668\u7684\u6587\u4ef6\u7cfb\u7edf\u5185\u7684\u3002"),(0,l.kt)("p",null,"\u91cd\u8981\u53c2\u6570",(0,l.kt)("inlineCode",{parentName:"p"},"upload_to"),"\u7528\u4e8e\u8bbe\u7f6e\u4e0a\u4f20\u5730\u5740\u7684\u76ee\u5f55\u548c\u6587\u4ef6\u540d\u3002\u5982\u4e0b\u4f8b\u6240\u793a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class MyModel(models.Model):\n    # \u6587\u4ef6\u88ab\u4f20\u81f3`MEDIA_ROOT/uploads`\u76ee\u5f55\uff0cMEDIA_ROOT\u7531\u4f60\u5728settings\u6587\u4ef6\u4e2d\u8bbe\u7f6e\n    upload = models.FileField(upload_to='uploads/')\n    # \u6216\u8005\n    # \u88ab\u4f20\u5230`MEDIA_ROOT/uploads/2015/01/30`\u76ee\u5f55\uff0c\u589e\u52a0\u4e86\u4e00\u4e2a\u65f6\u95f4\u5212\u5206\n    upload = models.FileField(upload_to='uploads/%Y/%m/%d/')\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Django\u5f88\u4eba\u6027\u5316\u5730\u5e2e\u6211\u4eec\u5b9e\u73b0\u4e86\u6839\u636e\u65e5\u671f\u751f\u6210\u76ee\u5f55\u6216\u6587\u4ef6\u7684\u65b9\u5f0f\uff01")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("inlineCode",{parentName:"strong"},"upload_to"),"\u53c2\u6570\u4e5f\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u8fd4\u56de\u5177\u4f53\u7684\u8def\u5f84\u5b57\u7b26\u4e32"),"\uff0c\u5982\u4e0b\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def user_directory_path(instance, filename):\n    #\u6587\u4ef6\u4e0a\u4f20\u5230MEDIA_ROOT/user_<id>/<filename>\u76ee\u5f55\u4e2d\n    return 'user_{0}/{1}'.format(instance.user.id, filename)\n\nclass MyModel(models.Model):\n    upload = models.FileField(upload_to=user_directory_path)\n")),(0,l.kt)("p",null,"\u4f8b\u5b50\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"user_directory_path"),"\u8fd9\u79cd\u56de\u8c03\u51fd\u6570\uff0c\u5fc5\u987b\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2aUnix\u98ce\u683c\u7684\u8def\u5f84\u5b57\u7b26\u4e32\u3002\u53c2\u6570",(0,l.kt)("inlineCode",{parentName:"p"},"instace"),"\u4ee3\u8868\u4e00\u4e2a\u5b9a\u4e49\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"FileField"),"\u7684\u6a21\u578b\u7684\u5b9e\u4f8b\uff0c\u8bf4\u767d\u4e86\u5c31\u662f\u5f53\u524d\u6570\u636e\u8bb0\u5f55\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"filename"),"\u662f\u539f\u672c\u7684\u6587\u4ef6\u540d\u3002"),(0,l.kt)("p",null,"\u4eceDjango3.0\u5f00\u59cb\uff0c\u652f\u6301\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"pathlib.Path")," \u5904\u7406\u8def\u5f84\u3002"),(0,l.kt)("p",null,"\u5f53\u4f60\u8bbf\u95ee\u4e00\u4e2a\u6a21\u578b\u5bf9\u8c61\u4e2d\u7684\u6587\u4ef6\u5b57\u6bb5\u65f6\uff0cDjango\u4f1a\u81ea\u52a8\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e00\u4e2a FieldFile\u5b9e\u4f8b\u4f5c\u4e3a\u6587\u4ef6\u7684\u4ee3\u7406\uff0c\u901a\u8fc7\u8fd9\u4e2a\u4ee3\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e9b\u6587\u4ef6\u64cd\u4f5c\uff0c\u4e3b\u8981\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"FieldFile.name \uff1a \u83b7\u53d6\u6587\u4ef6\u540d"),(0,l.kt)("li",{parentName:"ul"},"FieldFile.size\uff1a \u83b7\u53d6\u6587\u4ef6\u5927\u5c0f"),(0,l.kt)("li",{parentName:"ul"},"FieldFile.url \uff1a\u7528\u4e8e\u8bbf\u95ee\u8be5\u6587\u4ef6\u7684url"),(0,l.kt)("li",{parentName:"ul"},"FieldFile.open(mode='rb')\uff1a \u4ee5\u7c7b\u4f3cPython\u6587\u4ef6\u64cd\u4f5c\u7684\u65b9\u5f0f\uff0c\u6253\u5f00\u6587\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"FieldFile.close()\uff1a \u5173\u95ed\u6587\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"FieldFile.save(name, content, save=True)\uff1a \u4fdd\u5b58\u6587\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"FieldFile.delete(save=True)\uff1a \u5220\u9664\u6587\u4ef6")),(0,l.kt)("p",null,"\u8fd9\u4e9b\u4ee3\u7406\u7684API\u548cPython\u539f\u751f\u7684\u6587\u4ef6\u8bfb\u5199API\u975e\u5e38\u7c7b\u4f3c\uff0c\u5176\u5b9e\u672c\u8d28\u4e0a\u5c31\u662f\u8fdb\u884c\u4e86\u4e00\u5c42\u5c01\u88c5\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u5728Django\u5185\u76f4\u63a5\u5bf9\u6a21\u578b\u4e2d\u6587\u4ef6\u5b57\u6bb5\u8fdb\u884c\u8bfb\u5199\uff0c\u800c\u4e0d\u9700\u8981\u7ed5\u5f2f\u5b50\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"2. ImageField")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"class ImageField(upload_to=None, height_field=None, width_field=None, max_length=100, **options)\n")),(0,l.kt)("p",null,"\u7528\u4e8e\u4fdd\u5b58\u56fe\u50cf\u6587\u4ef6\u7684\u5b57\u6bb5\u3002\u8be5\u5b57\u6bb5\u7ee7\u627f\u4e86FileField\uff0c\u5176\u7528\u6cd5\u548c\u7279\u6027\u4e0eFileField\u57fa\u672c\u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u591a\u4e86\u4e24\u4e2a\u5c5e\u6027height\u548cwidth\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u5b57\u6bb5\u5728HTML\u4e2d\u8868\u73b0\u4e3a\u4e00\u4e2aClearableFileInput\u6807\u7b7e\u3002\u5728\u6570\u636e\u5e93\u5185\uff0c\u6211\u4eec\u5b9e\u9645\u4fdd\u5b58\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u9ed8\u8ba4\u6700\u5927\u957f\u5ea6100\uff0c\u53ef\u4ee5\u901a\u8fc7max_length\u53c2\u6570\u81ea\u5b9a\u4e49\u3002\u771f\u5b9e\u7684\u56fe\u7247\u662f\u4fdd\u5b58\u5728\u670d\u52a1\u5668\u7684\u6587\u4ef6\u7cfb\u7edf\u5185\u7684\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"height_field"),"\u53c2\u6570\uff1a\u4fdd\u5b58\u6709\u56fe\u7247\u9ad8\u5ea6\u4fe1\u606f\u7684\u6a21\u578b\u5b57\u6bb5\u540d\u3002 ",(0,l.kt)("inlineCode",{parentName:"p"},"width_field"),"\u53c2\u6570\uff1a\u4fdd\u5b58\u6709\u56fe\u7247\u5bbd\u5ea6\u4fe1\u606f\u7684\u6a21\u578b\u5b57\u6bb5\u540d\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f7f\u7528Django\u7684ImageField\u9700\u8981\u63d0\u524d\u5b89\u88c5pillow\u6a21\u5757\uff0cpip install pillow\u5373\u53ef\u3002")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"3. \u4f7f\u7528FileField\u6216\u8005ImageField\u5b57\u6bb5\u7684\u6b65\u9aa4\uff1a")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5728settings\u6587\u4ef6\u4e2d\uff0c\u914d\u7f6e",(0,l.kt)("inlineCode",{parentName:"li"},"MEDIA_ROOT"),"\uff0c\u4f5c\u4e3a\u4f60\u4e0a\u4f20\u6587\u4ef6\u5728\u670d\u52a1\u5668\u4e2d\u7684\u57fa\u672c\u8def\u5f84\uff08\u4e3a\u4e86\u6027\u80fd\u8003\u8651\uff0c\u8fd9\u4e9b\u6587\u4ef6\u4e0d\u4f1a\u88ab\u50a8\u5b58\u5728\u6570\u636e\u5e93\u4e2d\uff09\u3002\u518d\u914d\u7f6e\u4e2a",(0,l.kt)("inlineCode",{parentName:"li"},"MEDIA_URL"),"\uff0c\u4f5c\u4e3a\u516c\u7528URL\uff0c\u6307\u5411\u4e0a\u4f20\u6587\u4ef6\u7684\u57fa\u672c\u8def\u5f84\u3002\u8bf7\u786e\u4fddWeb\u670d\u52a1\u5668\u7684\u7528\u6237\u8d26\u53f7\u5bf9\u8be5\u76ee\u5f55\u5177\u6709\u5199\u7684\u6743\u9650\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u6dfb\u52a0FileField\u6216\u8005ImageField\u5b57\u6bb5\u5230\u4f60\u7684\u6a21\u578b\u4e2d\uff0c\u5b9a\u4e49\u597d",(0,l.kt)("inlineCode",{parentName:"li"},"upload_to"),"\u53c2\u6570\uff0c\u6587\u4ef6\u6700\u7ec8\u4f1a\u653e\u5728",(0,l.kt)("inlineCode",{parentName:"li"},"MEDIA_ROOT"),"\u76ee\u5f55\u7684\u201c",(0,l.kt)("inlineCode",{parentName:"li"},"upload_to"),"\u201d\u5b50\u76ee\u5f55\u4e2d\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u6240\u6709\u771f\u6b63\u88ab\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\u7684\uff0c\u53ea\u662f\u6307\u5411\u4f60\u4e0a\u4f20\u6587\u4ef6\u8def\u5f84\u7684\u5b57\u7b26\u4e32\u800c\u5df2\u3002\u53ef\u4ee5\u901a\u8fc7url\u5c5e\u6027\uff0c\u5728Django\u7684\u6a21\u677f\u4e2d\u65b9\u4fbf\u7684\u8bbf\u95ee\u8fd9\u4e9b\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u4f60\u6709\u4e00\u4e2aImageField\u5b57\u6bb5\uff0c\u540d\u53eb",(0,l.kt)("inlineCode",{parentName:"li"},"mug_shot"),"\uff0c\u90a3\u4e48\u5728Django\u6a21\u677f\u7684HTML\u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"{{ object.mug_shot.url }}"),"\u6765\u83b7\u53d6\u8be5\u6587\u4ef6\u3002\u5176\u4e2d\u7684object\u7528\u4f60\u5177\u4f53\u7684\u5bf9\u8c61\u540d\u79f0\u4ee3\u66ff\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"li"},"name"),"\u548c",(0,l.kt)("inlineCode",{parentName:"li"},"size"),"\u5c5e\u6027\uff0c\u83b7\u53d6\u6587\u4ef6\u7684\u540d\u79f0\u548c\u5927\u5c0f\u4fe1\u606f\u3002")),(0,l.kt)("p",null,"\u5b89\u5168\u5efa\u8bae\uff1a"),(0,l.kt)("p",null,"\u65e0\u8bba\u4f60\u5982\u4f55\u4fdd\u5b58\u4e0a\u4f20\u7684\u6587\u4ef6\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\u4ed6\u4eec\u7684\u5185\u5bb9\u548c\u683c\u5f0f\uff0c\u907f\u514d\u5b89\u5168\u6f0f\u6d1e\uff01\u52a1\u5fc5\u5bf9\u6240\u6709\u7684\u4e0a\u4f20\u6587\u4ef6\u8fdb\u884c\u5b89\u5168\u68c0\u67e5\uff0c\u786e\u4fdd\u5b83\u4eec\u4e0d\u51fa\u95ee\u9898\uff01\u5982\u679c\u4f60\u4e0d\u52a0\u4efb\u4f55\u68c0\u67e5\u5c31\u76f2\u76ee\u7684\u8ba9\u4efb\u4f55\u4eba\u4e0a\u4f20\u6587\u4ef6\u5230\u4f60\u7684\u670d\u52a1\u5668\u6587\u6863\u6839\u76ee\u5f55\u5185\uff0c\u6bd4\u5982\u4e0a\u4f20\u4e86\u4e00\u4e2aCGI\u6216\u8005PHP\u811a\u672c\uff0c\u5f88\u53ef\u80fd\u5c31\u4f1a\u88ab\u8bbf\u95ee\u7684\u7528\u6237\u6267\u884c\uff0c\u8fd9\u5177\u6709\u81f4\u547d\u7684\u5371\u5bb3\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"4. FilePathField")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class FilePathField(path='', match=None, recursive=False, allow_files=True, allow_folders=False, max_length=100, **options)\n")),(0,l.kt)("p",null,"\u4e00\u79cd\u7528\u6765\u4fdd\u5b58\u6587\u4ef6\u8def\u5f84\u4fe1\u606f\u7684\u5b57\u6bb5\u3002\u5728\u6570\u636e\u8868\u5185\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u9ed8\u8ba4\u6700\u5927\u957f\u5ea6100\uff0c\u53ef\u4ee5\u901a\u8fc7max_length\u53c2\u6570\u8bbe\u7f6e\u3002"),(0,l.kt)("p",null,"\u5b83\u5305\u542b\u6709\u4e0b\u9762\u7684\u4e00\u4e9b\u53c2\u6570\uff1a"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"path"),"\uff1a\u5fc5\u987b\u6307\u5b9a\u7684\u53c2\u6570\u3002\u8868\u793a\u4e00\u4e2a\u7cfb\u7edf\u7edd\u5bf9\u8def\u5f84\u3002path\u901a\u5e38\u662f\u4e2a\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u6bd4\u5982\u51fd\u6570\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"match"),":\u53ef\u9009\u53c2\u6570\uff0c\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u7528\u4e8e\u8fc7\u6ee4\u6587\u4ef6\u540d\u3002\u53ea\u5339\u914d\u57fa\u672c\u6587\u4ef6\u540d\uff0c\u4e0d\u5339\u914d\u8def\u5f84\u3002\u4f8b\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"foo.*\\.txt$"),"\uff0c\u53ea\u5339\u914d\u6587\u4ef6\u540d",(0,l.kt)("inlineCode",{parentName:"p"},"foo23.txt"),"\uff0c\u4e0d\u5339\u914d",(0,l.kt)("inlineCode",{parentName:"p"},"bar.txt"),"\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"foo23.png"),"\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"recursive"),":\u53ef\u9009\u53c2\u6570\uff0c\u53ea\u80fd\u662fTrue\u6216\u8005False\u3002\u9ed8\u8ba4\u4e3aFalse\u3002\u51b3\u5b9a\u662f\u5426\u5305\u542b\u5b50\u76ee\u5f55\uff0c\u4e5f\u5c31\u662f\u662f\u5426\u9012\u5f52\u7684\u610f\u601d\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"allow_files"),":\u53ef\u9009\u53c2\u6570\uff0c\u53ea\u80fd\u662fTrue\u6216\u8005False\u3002\u9ed8\u8ba4\u4e3aTrue\u3002\u51b3\u5b9a\u662f\u5426\u5e94\u8be5\u5c06\u6587\u4ef6\u540d\u5305\u62ec\u5728\u5185\u3002\u5b83\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"allow_folders"),"\u5176\u4e2d\uff0c\u5fc5\u987b\u6709\u4e00\u4e2a\u4e3aTrue\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"allow_folders"),"\uff1a \u53ef\u9009\u53c2\u6570\uff0c\u53ea\u80fd\u662fTrue\u6216\u8005False\u3002\u9ed8\u8ba4\u4e3aFalse\u3002\u51b3\u5b9a\u662f\u5426\u5e94\u8be5\u5c06\u76ee\u5f55\u540d\u5305\u62ec\u5728\u5185\u3002"),(0,l.kt)("p",null,"\u6bd4\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'FilePathField(path="/home/images", match="foo.*", recursive=True)\n')),(0,l.kt)("p",null,"\u5b83\u53ea\u5339\u914d",(0,l.kt)("inlineCode",{parentName:"p"},"/home/images/foo.png"),"\uff0c\u4f46\u4e0d\u5339\u914d",(0,l.kt)("inlineCode",{parentName:"p"},"/home/images/foo/bar.png"),"\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\uff0c\u53ea\u5339\u914d\u6587\u4ef6\u540d\uff0c\u800c\u4e0d\u7ba1\u8def\u5f84\u662f\u600e\u4e48\u6837\u7684\u3002"),(0,l.kt)("p",null,"\u4f8b\u5b50\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import os\nfrom django.conf import settings\nfrom django.db import models\n\ndef images_path():\n    return os.path.join(settings.LOCAL_FILE_DIR, 'images')\n\nclass MyModel(models.Model):\n    file = models.FilePathField(path=images_path)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"5. UUIDField")),(0,l.kt)("p",null,"\u6570\u636e\u5e93\u65e0\u6cd5\u81ea\u5df1\u751f\u6210uuid\uff0c\u56e0\u6b64\u9700\u8981\u5982\u4e0b\u4f7f\u7528default\u53c2\u6570\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import uuid     # Python\u7684\u5185\u7f6e\u6a21\u5757\nfrom django.db import models\n\nclass MyUUIDModel(models.Model):\n    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n    # \u5176\u5b83\u5b57\u6bb5\n")),(0,l.kt)("p",null,"\u6ce8\u610f\u4e0d\u8981\u5199\u6210",(0,l.kt)("inlineCode",{parentName:"p"},"default=uuid.uuid4()")),(0,l.kt)("h3",{id:"42-\u5b57\u6bb5\u7684\u53c2\u6570"},"4.2 \u5b57\u6bb5\u7684\u53c2\u6570"),(0,l.kt)("p",null,"\u6240\u6709\u7684\u6a21\u578b\u5b57\u6bb5\u90fd\u53ef\u4ee5\u63a5\u6536\u4e00\u5b9a\u6570\u91cf\u7684\u53c2\u6570\uff0c\u6bd4\u5982CharField\u81f3\u5c11\u9700\u8981\u4e00\u4e2amax_length\u53c2\u6570\u3002\u4e0b\u9762\u7684\u8fd9\u4e9b\u53c2\u6570\u662f\u6240\u6709\u5b57\u6bb5\u90fd\u53ef\u4ee5\u4f7f\u7528\u7684\uff0c\u5e76\u4e14\u662f\u53ef\u9009\u7684\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"null")),(0,l.kt)("p",null,"\u8be5\u503c\u4e3aTrue\u65f6\uff0cDjango\u5728\u6570\u636e\u5e93\u7528NULL\u4fdd\u5b58\u7a7a\u503c\u3002\u9ed8\u8ba4\u503c\u4e3aFalse\u3002\u5bf9\u4e8e\u4fdd\u5b58\u5b57\u7b26\u4e32\u7c7b\u578b\u6570\u636e\u7684\u5b57\u6bb5\uff0c\u8bf7\u5c3d\u91cf\u907f\u514d\u5c06\u6b64\u53c2\u6570\u8bbe\u4e3aTrue\uff0c\u90a3\u6837\u4f1a\u5bfc\u81f4\u4e24\u79cd\u2018\u6ca1\u6709\u6570\u636e\u2019\u7684\u60c5\u51b5\uff0c\u4e00\u79cd\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"NULL"),"\uff0c\u53e6\u4e00\u79cd\u662f\u7a7a\u5b57\u7b26\u4e32",(0,l.kt)("inlineCode",{parentName:"p"},"''"),"\u3002Django \u7684\u60ef\u4f8b\u662f\u4f7f\u7528\u7a7a\u5b57\u7b26\u4e32\u800c\u4e0d\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"NULL"),"\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"blank")),(0,l.kt)("p",null,"True\u65f6\uff0c\u5b57\u6bb5\u53ef\u4ee5\u4e3a\u7a7a\u3002\u9ed8\u8ba4False\u3002\u548cnull\u53c2\u6570\u4e0d\u540c\u7684\u662f\uff0cnull\u662f\u7eaf\u6570\u636e\u5e93\u5c42\u9762\u7684\uff0c\u800cblank\u662f\u9a8c\u8bc1\u76f8\u5173\u7684\uff0c\u5b83\u4e0e\u8868\u5355\u9a8c\u8bc1\u662f\u5426\u5141\u8bb8\u8f93\u5165\u6846\u5185\u4e3a\u7a7a\u6709\u5173\uff0c\u4e0e\u6570\u636e\u5e93\u65e0\u5173\u3002\u6240\u4ee5\u8981\u5c0f\u5fc3\u4e00\u4e2anull\u4e3aFalse\uff0cblank\u4e3aTrue\u7684\u5b57\u6bb5\u63a5\u6536\u5230\u4e00\u4e2a\u7a7a\u503c\u53ef\u80fd\u4f1a\u51fabug\u6216\u5f02\u5e38\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"default")),(0,l.kt)("p",null,"\u5b57\u6bb5\u7684\u9ed8\u8ba4\u503c\uff0c\u53ef\u4ee5\u662f\u503c\u6216\u8005\u4e00\u4e2a\u53ef\u8c03\u7528\u5bf9\u8c61\u3002\u5982\u679c\u662f\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u90a3\u4e48\u6bcf\u6b21\u521b\u5efa\u65b0\u5bf9\u8c61\u65f6\u90fd\u4f1a\u8c03\u7528\u3002\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u503c\u4e0d\u80fd\u662f\u4e00\u4e2a\u53ef\u53d8\u5bf9\u8c61\uff0c\u6bd4\u5982\u5217\u8868\u3001\u96c6\u5408\u7b49\u7b49\u3002lambda\u533f\u540d\u51fd\u6570\u4e5f\u4e0d\u53ef\u7528\u4e8edefault\u7684\u8c03\u7528\u5bf9\u8c61\uff0c\u56e0\u4e3a\u533f\u540d\u51fd\u6570\u4e0d\u80fd\u88abmigrations\u5e8f\u5217\u5316\u3002"),(0,l.kt)("p",null,"\u6ce8\u610f\uff1a\u5728\u67d0\u79cd\u539f\u56e0\u4e0d\u660e\u7684\u60c5\u51b5\u4e0b\u5c06default\u8bbe\u7f6e\u4e3aNone\uff0c\u53ef\u80fd\u4f1a\u5f15\u53d1",(0,l.kt)("inlineCode",{parentName:"p"},"intergyerror\uff1anot null constraint failed"),"\uff0c\u5373\u975e\u7a7a\u7ea6\u675f\u5931\u8d25\u5f02\u5e38\uff0c\u5bfc\u81f4",(0,l.kt)("inlineCode",{parentName:"p"},"python manage.py migrate"),"\u5931\u8d25\uff0c\u6b64\u65f6\u53ef\u5c06None\u6539\u4e3aFalse\u6216\u5176\u5b83\u7684\u503c\uff0c\u53ea\u8981\u4e0d\u662fNone\u5c31\u884c\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"choices")),(0,l.kt)("p",null,"\u7528\u4e8e\u9875\u9762\u4e0a\u7684\u9009\u62e9\u6846\u6807\u7b7e\uff0c\u9700\u8981\u5148\u63d0\u4f9b\u4e00\u4e2a\u4e8c\u7ef4\u7684\u4e8c\u5143\u5143\u7ec4\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u8868\u793a\u5b58\u5728\u6570\u636e\u5e93\u5185\u771f\u5b9e\u7684\u503c\uff0c\u7b2c\u4e8c\u4e2a\u8868\u793a\u9875\u9762\u4e0a\u663e\u793a\u7684\u5177\u4f53\u5185\u5bb9\u3002\u5728\u6d4f\u89c8\u5668\u9875\u9762\u4e0a\u5c06\u663e\u793a\u7b2c\u4e8c\u4e2a\u5143\u7d20\u7684\u503c\u3002\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"gender = models.SmallIntegerField(choices=[\n        (0, '\u5973'),\n        (1, '\u7537'),\n        (2, '\u672a\u77e5')\n    ])\n")),(0,l.kt)("p",null,"\u53cd\u8fc7\u6765\uff0c\u8981\u83b7\u53d6\u4e00\u4e2achoices\u7684\u7b2c\u4e8c\u5143\u7d20\u7684\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"get_FOO_display()"),"\u65b9\u6cd5\uff0c\u5176\u4e2d\u7684FOO\u7528\u5b57\u6bb5\u540d\u4ee3\u66ff\uff0c\u5373\u4e0a\u8ff0\u4f7f\u7528get_gender_display()\u83b7\u53d6\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"db_column")),(0,l.kt)("p",null,"\u8be5\u53c2\u6570\u7528\u4e8e\u5b9a\u4e49\u5f53\u524d\u5b57\u6bb5\u5728\u6570\u636e\u8868\u5185\u7684\u5217\u540d\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0cDjango\u5c06\u4f7f\u7528\u5b57\u6bb5\u540d\u4f5c\u4e3a\u5217\u540d\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"db_index")),(0,l.kt)("p",null,"\u8be5\u53c2\u6570\u63a5\u6536\u5e03\u5c14\u503c\u3002\u5982\u679c\u4e3aTrue\uff0c\u6570\u636e\u5e93\u5c06\u4e3a\u8be5\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"editable")),(0,l.kt)("p",null,"\u5982\u679c\u8bbe\u4e3aFalse\uff0c\u90a3\u4e48\u5f53\u524d\u5b57\u6bb5\u5c06\u4e0d\u4f1a\u5728admin\u540e\u53f0\u6216\u8005\u5176\u5b83\u7684ModelForm\u8868\u5355\u4e2d\u663e\u793a\uff0c\u540c\u65f6\u8fd8\u4f1a\u88ab\u6a21\u578b\u9a8c\u8bc1\u529f\u80fd\u8df3\u8fc7\u3002\u53c2\u6570\u9ed8\u8ba4\u503c\u4e3aTrue\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"error_messages")),(0,l.kt)("p",null,"\u7528\u4e8e\u81ea\u5b9a\u4e49\u9519\u8bef\u4fe1\u606f\u3002\u53c2\u6570\u63a5\u6536\u5b57\u5178\u7c7b\u578b\u7684\u503c\u3002\u5b57\u5178\u7684\u952e\u53ef\u4ee5\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"null"),"\u3001 ",(0,l.kt)("inlineCode",{parentName:"p"},"blank"),"\u3001 ",(0,l.kt)("inlineCode",{parentName:"p"},"invalid"),"\u3001 ",(0,l.kt)("inlineCode",{parentName:"p"},"invalid_choice"),"\u3001 ",(0,l.kt)("inlineCode",{parentName:"p"},"unique"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"unique_for_date"),"\u5176\u4e2d\u7684\u4e00\u4e2a\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"help_text")),(0,l.kt)("p",null,"\u989d\u5916\u663e\u793a\u5728\u8868\u5355\u90e8\u4ef6\u4e0a\u7684\u5e2e\u52a9\u6587\u672c\u3002\u5373\u4fbf\u4f60\u7684\u5b57\u6bb5\u672a\u7528\u4e8e\u8868\u5355\uff0c\u5b83\u5bf9\u4e8e\u751f\u6210\u6587\u6863\u4e5f\u662f\u5f88\u6709\u7528\u7684\u3002"),(0,l.kt)("p",null,"\u8be5\u5e2e\u52a9\u6587\u672c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u53ef\u4ee5\u5e26HTML\u4ee3\u7801\u7684\uff0c\u5177\u6709\u98ce\u9669\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'help_text="Please use the following format: <em>YYYY-MM-DD</em>."\n')),(0,l.kt)("p",null,"\u6240\u4ee5\u4f7f\u7528\u65f6\u8bf7\u6ce8\u610f\u8f6c\u4e49\u4e3a\u7eaf\u6587\u672c\uff0c\u9632\u6b62\u811a\u672c\u653b\u51fb\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"primary_key")),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u6ca1\u6709\u7ed9\u6a21\u578b\u7684\u4efb\u4f55\u5b57\u6bb5\u8bbe\u7f6e\u8fd9\u4e2a\u53c2\u6570\u4e3aTrue\uff0cDjango\u5c06\u81ea\u52a8\u521b\u5efa\u4e00\u4e2aAutoField\u81ea\u589e\u5b57\u6bb5\uff0c\u540d\u4e3a\u2018id\u2019\uff0c\u5e76\u8bbe\u7f6e\u4e3a\u4e3b\u952e\u3002\u4e5f\u5c31\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"id = models.AutoField(primary_key=True)"),"\u3002\u5982\u679c\u4f60\u4e3a\u67d0\u4e2a\u5b57\u6bb5\u8bbe\u7f6e\u4e86primary_key=True\uff0c\u5219\u5f53\u524d\u5b57\u6bb5\u53d8\u4e3a\u4e3b\u952e\uff0c\u5e76\u5173\u95edDjango\u81ea\u52a8\u751f\u6210id\u4e3b\u952e\u7684\u529f\u80fd\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"verbose_name")),(0,l.kt)("p",null,"\u4e3a\u5b57\u6bb5\u8bbe\u7f6e\u4e00\u4e2a\u4eba\u7c7b\u53ef\u8bfb\uff0c\u66f4\u52a0\u76f4\u89c2\u7684\u522b\u540d\u3002"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5b57\u6bb5\u7c7b\u578b\uff0c\u9664\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"ForeignKey"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"ManyToManyField"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"OneToOneField"),"\u8fd9\u4e09\u4e2a\u7279\u6b8a\u7684\u5173\u7cfb\u7c7b\u578b\uff0c\u5176\u7b2c\u4e00\u53ef\u9009\u4f4d\u7f6e\u53c2\u6570\u90fd\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"verbose_name"),"\u3002\u5982\u679c\u6ca1\u6307\u5b9a\u8fd9\u4e2a\u53c2\u6570\uff0cDjango\u4f1a\u5229\u7528\u5b57\u6bb5\u7684\u5c5e\u6027\u540d\u81ea\u52a8\u521b\u5efa\u5b83\uff0c\u5e76\u5c06\u4e0b\u5212\u7ebf\u8f6c\u6362\u4e3a\u7a7a\u683c\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"validators")),(0,l.kt)("p",null,"\u8fd0\u884c\u5728\u8be5\u5b57\u6bb5\u4e0a\u7684\u9a8c\u8bc1\u5668\u7684\u5217\u8868\u3002"),(0,l.kt)("h3",{id:"43-\u5173\u8054\u5173\u7cfb"},"4.3 \u5173\u8054\u5173\u7cfb"),(0,l.kt)("h4",{id:"\u591a\u5bf9\u4e00foreignkey"},"\u591a\u5bf9\u4e00\uff08ForeignKey\uff09"),(0,l.kt)("p",null,"\u591a\u5bf9\u4e00\u7684\u5173\u7cfb\uff0c\u901a\u5e38\u88ab\u79f0\u4e3a\u5916\u952e\u3002\u5916\u952e\u5b57\u6bb5\u7c7b\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"class ForeignKey(to, on_delete, **options)")),(0,l.kt)("p",null,"\u5916\u952e\u9700\u8981\u4e24\u4e2a\u4f4d\u7f6e\u53c2\u6570\uff0c\u4e00\u4e2a\u662f\u5173\u8054\u7684\u6a21\u578b\uff0c\u53e6\u4e00\u4e2a\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"on_delete"),"\u3002\u5728Django2.0\u7248\u672c\u540e\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"on_delete"),"\u5c5e\u4e8e\u5fc5\u586b\u53c2\u6570\u3002"),(0,l.kt)("p",null,"\u81ea\u5173\u8054\uff08\u9012\u5f52\u5916\u952e\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u65b9\u6cd5\uff1a"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"models.ForeignKey('self', on_delete=models.CASCADE)")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u53c2\u6570\u8bf4\u660e"),"\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"on_delete"),"\uff1a\u5f53\u4e00\u4e2a\u5916\u952e\u5173\u8054\u7684\u5bf9\u8c61\u88ab\u5220\u9664\u65f6\uff0cDjango\u5c06\u6a21\u4eff",(0,l.kt)("inlineCode",{parentName:"li"},"on_delete"),"\u53c2\u6570\u5b9a\u4e49\u7684SQL\u7ea6\u675f\u6267\u884c\u76f8\u5e94\u64cd\u4f5c\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"user = models.ForeignKey(\n    User,\n    on_delete=models.SET_NULL,\n    blank=True,\n    null=True,\n)\n")),(0,l.kt)("p",null,"\u200b\t\u8be5\u53c2\u6570\u53ef\u9009\u7684\u503c\u90fd\u5185\u7f6e\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"django.db.models"),"\u4e2d\uff08\u5168\u90e8\u4e3a\u5927\u5199\uff09\uff0c\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"CASCADE\uff1a\u6a21\u62dfSQL\u8bed\u8a00\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"ON DELETE CASCADE"),"\u7ea6\u675f\uff0c\u5c06\u5b9a\u4e49\u6709\u5916\u952e\u7684\u6a21\u578b\u5bf9\u8c61\u540c\u65f6\u5220\u9664\uff01"),(0,l.kt)("li",{parentName:"ul"},"PROTECT:\u963b\u6b62\u4e0a\u9762\u7684\u5220\u9664\u64cd\u4f5c\uff0c\u4f46\u662f\u5f39\u51fa",(0,l.kt)("inlineCode",{parentName:"li"},"ProtectedError"),"\u5f02\u5e38"),(0,l.kt)("li",{parentName:"ul"},"SET_NULL\uff1a\u5c06\u5916\u952e\u5b57\u6bb5\u8bbe\u4e3anull\uff0c\u53ea\u6709\u5f53\u5b57\u6bb5\u8bbe\u7f6e\u4e86",(0,l.kt)("inlineCode",{parentName:"li"},"null=True"),"\u65f6\uff0c\u65b9\u53ef\u4f7f\u7528\u8be5\u503c\u3002"),(0,l.kt)("li",{parentName:"ul"},"SET_DEFAULT:\u5c06\u5916\u952e\u5b57\u6bb5\u8bbe\u4e3a\u9ed8\u8ba4\u503c\u3002\u53ea\u6709\u5f53\u5b57\u6bb5\u8bbe\u7f6e\u4e86default\u53c2\u6570\u65f6\uff0c\u65b9\u53ef\u4f7f\u7528\u3002"),(0,l.kt)("li",{parentName:"ul"},"DO_NOTHING\uff1a\u4ec0\u4e48\u4e5f\u4e0d\u505a\u3002"),(0,l.kt)("li",{parentName:"ul"},"SET()\uff1a\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u4f20\u9012\u7ed9SET()\u7684\u503c\u6216\u8005\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u6ce8\u610f\u5927\u5c0f\u5199\u3002")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"to_field")),(0,l.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5916\u952e\u90fd\u662f\u5173\u8054\u5230\u88ab\u5173\u8054\u5bf9\u8c61\u7684\u4e3b\u952e\u4e0a\uff08\u4e00\u822c\u4e3aid\uff09\u3002\u5982\u679c\u6307\u5b9a\u8fd9\u4e2a\u53c2\u6570\uff0c\u53ef\u4ee5\u5173\u8054\u5230\u6307\u5b9a\u7684\u5b57\u6bb5\u4e0a\uff0c\u4f46\u662f\u8be5\u5b57\u6bb5\u5fc5\u987b\u5177\u6709",(0,l.kt)("inlineCode",{parentName:"p"},"unique=True"),"\u5c5e\u6027\uff0c\u4e5f\u5c31\u662f\u5177\u6709\u552f\u4e00\u5c5e\u6027\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"related_name")),(0,l.kt)("p",{parentName:"li"},"\u7528\u4e8e\u5173\u8054\u5bf9\u8c61\u53cd\u5411\u5f15\u7528\u6a21\u578b\u7684\u540d\u79f0\u3002"),(0,l.kt)("p",{parentName:"li"},"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u53c2\u6570\u6211\u4eec\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\uff0cDjango\u4f1a\u9ed8\u8ba4\u4ee5\u6a21\u578b\u7684\u5c0f\u5199\u52a0\u4e0a",(0,l.kt)("inlineCode",{parentName:"p"},"_set"),"\u4f5c\u4e3a\u53cd\u5411\u5173\u8054\u540d\u3002"))),(0,l.kt)("h4",{id:"\u591a\u5bf9\u591amanytomanyfield"},"\u591a\u5bf9\u591a\uff08ManyToManyField\uff09"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"class ManyToManyField(to, **options)\n")),(0,l.kt)("p",null,"\u5efa\u8bae\u4e3a\u591a\u5bf9\u591a\u5b57\u6bb5\u540d\u4f7f\u7528\u590d\u6570\u5f62\u5f0f\u3002"),(0,l.kt)("p",null,"\u591a\u5bf9\u591a\u5173\u7cfb\u9700\u8981\u4e00\u4e2a\u4f4d\u7f6e\u53c2\u6570\uff1a\u5173\u8054\u7684\u5bf9\u8c61\u6a21\u578b\uff0c\u5176\u5b83\u7528\u6cd5\u548c\u5916\u952e\u591a\u5bf9\u4e00\u57fa\u672c\u7c7b\u4f3c\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u8981\u521b\u5efa\u4e00\u4e2a\u5173\u8054\u81ea\u5df1\u7684\u591a\u5bf9\u591a\u5b57\u6bb5\uff0c\u4f9d\u7136\u662f\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"'self'"),"\u5f15\u7528\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5728\u6570\u636e\u5e93\u540e\u53f0\uff0cDjango\u5b9e\u9645\u4e0a\u4f1a\u989d\u5916\u521b\u5efa\u4e00\u5f20\u7528\u4e8e\u4f53\u73b0\u591a\u5bf9\u591a\u5173\u7cfb\u7684\u4e2d\u95f4\u8868"),"\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u8868\u7684\u540d\u79f0\u662f\u201c",(0,l.kt)("inlineCode",{parentName:"p"},"\u591a\u5bf9\u591a\u5b57\u6bb5\u540d+\u5305\u542b\u8be5\u5b57\u6bb5\u7684\u6a21\u578b\u540d+\u4e00\u4e2a\u72ec\u4e00\u65e0\u4e8c\u7684\u54c8\u5e0c\u7801"),"\u201d\uff0c\u4f8b\u5982\u2018author_books_9cdf4\u2019\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"db_table"),"\u9009\u9879\uff0c\u81ea\u5b9a\u4e49\u8868\u540d\u3002"),(0,l.kt)("p",null,"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fd9\u5f20\u8868\u5728\u6570\u636e\u5e93\u5185\u7684\u7ed3\u6784\u662f\u8fd9\u4e2a\u6837\u5b50\u7684\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u4e2d\u95f4\u8868\u7684id\u5217....\u6a21\u578b\u5bf9\u8c61\u7684id\u5217.....\u88ab\u5173\u8054\u5bf9\u8c61\u7684id\u5217\n# \u5404\u884c\u6570\u636e\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u53c2\u6570\u8bf4\u660e\uff1a")),(0,l.kt)("p",null,"Related_name\u3001related_query_name\u3001limit_choices_to\u548c\u5916\u952e\u7684\u7528\u6cd5\u4e00\u81f4\u3002\u53c2\u8003\u4e0a\u8ff0\u7528\u6cd5\u5373\u53ef\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"null\u53c2\u6570\u5bf9ManyToManyField\u591a\u5bf9\u591a\u5b57\u6bb5\u65e0\u6548\uff01\u8bbe\u7f6enull=True\u6beb\u65e0\u610f\u4e49")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"through"),"\n\u5982\u679c\u4f60\u60f3\u81ea\u5b9a\u4e49\u591a\u5bf9\u591a\u5173\u7cfb\u7684\u90a3\u5f20\u989d\u5916\u7684\u5173\u8054\u8868\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u53c2\u6570\uff01\u53c2\u6570\u7684\u503c\u4e3a\u4e00\u4e2a\u4e2d\u95f4\u6a21\u578b\u3002"),(0,l.kt)("p",{parentName:"li"},"\u6700\u5e38\u89c1\u7684\u4f7f\u7528\u573a\u666f\u662f\u4f60\u9700\u8981\u4e3a\u591a\u5bf9\u591a\u5173\u7cfb\u6dfb\u52a0\u989d\u5916\u7684\u6570\u636e\uff0c\u6bd4\u5982\u6dfb\u52a0\u4e24\u4e2a\u4eba\u5efa\u7acbQQ\u597d\u53cb\u5173\u7cfb\u7684\u65f6\u95f4\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.db import models\n\nclass Person(models.Model):\n    name = models.CharField(max_length=50)\n\nclass Group(models.Model):\n    name = models.CharField(max_length=128)\n    members = models.ManyToManyField(\n        Person,\n        through='Membership',       ## \u81ea\u5b9a\u4e49\u4e2d\u95f4\u8868\n        through_fields=('group', 'person'),\n    )\n\nclass Membership(models.Model):  # \u8fd9\u5c31\u662f\u5177\u4f53\u7684\u4e2d\u95f4\u8868\u6a21\u578b\n    group = models.ForeignKey(Group, on_delete=models.CASCADE)\n    person = models.ForeignKey(Person, on_delete=models.CASCADE)\n    inviter = models.ForeignKey(\n        Person,\n        on_delete=models.CASCADE,\n        related_name=\"membership_invites\",\n    )\n    invite_reason = models.CharField(max_length=64)\n")),(0,l.kt)("p",{parentName:"li"},"\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"class Membership(models.Model)"),"\u5b9a\u4e49\u4e86\u4e00\u4e2a\u65b0\u7684\u6a21\u578b\uff0c\u7528\u6765\u4fdd\u5b58Person\u548cGroup\u6a21\u578b\u7684\u591a\u5bf9\u591a\u5173\u7cfb\uff0c\u5e76\u4e14\u540c\u65f6\u589e\u52a0\u4e86\u2018\u9080\u8bf7\u4eba\u2019\u548c\u2018\u9080\u8bf7\u539f\u56e0\u2019\u7684\u5b57\u6bb5\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"through_fields")),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"through_fields"),"\u53c2\u6570\u6307\u5b9a\u4ece\u4e2d\u95f4\u8868\u6a21\u578bMembership\u4e2d\u9009\u62e9\u54ea\u4e24\u4e2a\u5b57\u6bb5\uff0c\u4f5c\u4e3a\u5173\u7cfb\u8fde\u63a5\u5b57\u6bb5\u3002"),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"through_fields"),"\u53c2\u6570\u63a5\u6536\u4e00\u4e2a\u4e8c\u5143\u5143\u7ec4('field1', 'field2')\uff0cfield1\u662f\u6307\u5411\u5b9a\u4e49\u6709\u591a\u5bf9\u591a\u5173\u7cfb\u7684\u6a21\u578b\u7684\u5916\u952e\u5b57\u6bb5\u7684\u540d\u79f0\uff0c\u8fd9\u91cc\u662fMembership\u4e2d\u7684\u2018group\u2019\u5b57\u6bb5\uff08\u6ce8\u610f\u5927\u5c0f\u5199\uff09\uff0c\u53e6\u5916\u4e00\u4e2a\u5219\u662f\u6307\u5411\u76ee\u6807\u6a21\u578b\u7684\u5916\u952e\u5b57\u6bb5\u7684\u540d\u79f0\uff0c\u8fd9\u91cc\u662fMembership\u4e2d\u7684\u2018person\u2019"))),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"db_table")),(0,l.kt)("p",{parentName:"li"},"\u8bbe\u7f6e\u4e2d\u95f4\u8868\u7684\u540d\u79f0\u3002\u4e0d\u6307\u5b9a\u7684\u8bdd\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002"))),(0,l.kt)("h4",{id:"\u4e00\u5bf9\u4e00onetoonefield"},"\u4e00\u5bf9\u4e00\uff08OneToOneField\uff09"),(0,l.kt)("p",null,"\u4e00\u5bf9\u4e00\u5173\u7cfb\u7c7b\u578b\u7684\u5b9a\u4e49\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"class OneToOneField(to, on_delete, parent_link=False, **options)\n")),(0,l.kt)("p",null,"\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u4e00\u5bf9\u4e00\u5173\u7cfb\u975e\u5e38\u7c7b\u4f3c\u5177\u6709",(0,l.kt)("inlineCode",{parentName:"p"},"unique=True"),"\u5c5e\u6027\u7684\u5916\u952e\u5173\u7cfb\uff0c\u4f46\u662f\u53cd\u5411\u5173\u8054\u5bf9\u8c61\u53ea\u6709\u4e00\u4e2a\u3002\u8fd9\u79cd\u5173\u7cfb\u7c7b\u578b\u591a\u6570\u7528\u4e8e\u5f53\u4e00\u4e2a\u6a21\u578b\u9700\u8981\u4ece\u522b\u7684\u6a21\u578b\u6269\u5c55\u800c\u6765\u7684\u60c5\u51b5\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u6ca1\u6709\u7ed9\u4e00\u5bf9\u4e00\u5173\u7cfb\u8bbe\u7f6e",(0,l.kt)("inlineCode",{parentName:"p"},"related_name"),"\u53c2\u6570\uff0cDjango\u5c06\u4f7f\u7528\u5f53\u524d\u6a21\u578b\u7684\u5c0f\u5199\u540d\u4f5c\u4e3a\u9ed8\u8ba4\u503c\u3002"),(0,l.kt)("p",null,"\u4e5f\u53ef\u4ee5\u8fde\u63a5\u7b2c\u4e09\u65b9\u5bfc\u5165\u7684\u6a21\u578b\u3002"),(0,l.kt)("h3",{id:"44-\u5143\u6570\u636e\u7c7bmeta"},"4.4 \u5143\u6570\u636e\u7c7bMeta"),(0,l.kt)("p",null,"\u6a21\u578b\u7684\u5143\u6570\u636e\uff0c\u6307\u7684\u662f\u201c\u9664\u4e86\u5b57\u6bb5\u5916\u7684\u6240\u6709\u5185\u5bb9\u201d\uff0c\u4f8b\u5982\u6392\u5e8f\u65b9\u5f0f\u3001\u6570\u636e\u5e93\u8868\u540d\u3001\u4eba\u7c7b\u53ef\u8bfb\u7684\u5355\u6570\u6216\u8005\u590d\u6570\u540d\u7b49\u7b49\u3002"),(0,l.kt)("p",null,"\u60f3\u5728\u6a21\u578b\u4e2d\u589e\u52a0\u5143\u6570\u636e\uff0c\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u5728\u6a21\u578b\u7c7b\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u5185\u90e8\u7c7b\uff0c\u540d\u5b57\u662f\u56fa\u5b9a\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"Meta"),"\uff0c\u7136\u540e\u5728\u8fd9\u4e2aMeta\u7c7b\u4e0b\u9762\u589e\u52a0\u5404\u79cd\u5143\u6570\u636e\u9009\u9879\u6216\u8005\u8bf4\u8bbe\u7f6e\u9879\u3002\u53c2\u8003\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from django.db import models\n\nclass Ox(models.Model):\n    horn_length = models.IntegerField()\n\n    class Meta:         # \u6ce8\u610f\uff0c\u662f\u6a21\u578b\u7684\u5185\u90e8\u7c7b\uff0c\u8981\u7f29\u8fdb\uff01\n        ordering = ["horn_length"]\n        verbose_name_plural = "oxen"\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u914d\u7f6e\u5c5e\u6027\uff1a")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"abstract")),(0,l.kt)("p",null,"\u5982\u679c",(0,l.kt)("inlineCode",{parentName:"p"},"abstract=True"),"\uff0c\u90a3\u4e48\u6a21\u578b\u4f1a\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u62bd\u8c61\u6a21\u578b\u3002\u62bd\u8c61\u6a21\u578b\u672c\u8eab\u4e0d\u5b9e\u9645\u751f\u6210\u6570\u636e\u5e93\u8868\uff0c\u800c\u662f\u4f5c\u4e3a\u5176\u5b83\u6a21\u578b\u7684\u7236\u7c7b\uff0c\u88ab\u7ee7\u627f\u4f7f\u7528\u3002\u5177\u4f53\u5185\u5bb9\u53ef\u4ee5\u53c2\u8003Django\u6a21\u578b\u7684\u7ee7\u627f\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"app_label")),(0,l.kt)("p",null,"\u5982\u679c\u5b9a\u4e49\u4e86\u6a21\u578b\u7684app\u6ca1\u6709\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"INSTALLED_APPS"),"\u4e2d\u6ce8\u518c\uff0c\u5219\u5fc5\u987b\u901a\u8fc7\u6b64\u5143\u9009\u9879\u58f0\u660e\u5b83\u5c5e\u4e8e\u54ea\u4e2aapp\uff0c\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"app_label = 'myapp'\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"db_table")),(0,l.kt)("p",null,"\u6307\u5b9a\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u5f53\u524d\u6a21\u578b\u751f\u6210\u7684\u6570\u636e\u8868\u7684\u8868\u540d\u3002\u4e0d\u8981\u4f7f\u7528SQL\u8bed\u8a00\u6216\u8005Python\u7684\u4fdd\u7559\u5b57\uff0c\u6ce8\u610f\u51b2\u7a81\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u6ca1\u6709\u6307\u5b9a\u8fd9\u4e2a\u9009\u9879\uff0c\u90a3\u4e48Django\u4f1a\u81ea\u52a8\u4f7f\u7528app\u540d\u548c\u6a21\u578b\u540d\uff0c\u901a\u8fc7\u4e0b\u5212\u7ebf\u8fde\u63a5\u751f\u6210\u6570\u636e\u8868\u540d\uff0c\u6bd4\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"app_book"),"\u3002"),(0,l.kt)("p",null,"\u53cb\u60c5\u5efa\u8bae\uff1a\u4f7f\u7528MySQL\u548cMariaDB\u6570\u636e\u5e93\u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"db_table"),"\u7528\u5c0f\u5199\u82f1\u6587\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"db_tablespace")),(0,l.kt)("p",null,"\u81ea\u5b9a\u4e49\u6570\u636e\u5e93\u8868\u7a7a\u95f4\u7684\u540d\u5b57\u3002\u9ed8\u8ba4\u503c\u662f\u9879\u76ee\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"DEFAULT_TABLESPACE"),"\u914d\u7f6e\u9879\u6307\u5b9a\u7684\u503c\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"base_manager_name")),(0,l.kt)("p",null,"\u6a21\u578b\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"_base_manager"),"\u7ba1\u7406\u5668\u7684\u540d\u5b57\uff0c\u9ed8\u8ba4\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"'objects'"),"\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"default_manager_name")),(0,l.kt)("p",null,"\u6a21\u578b\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"_default_manager"),"\u7ba1\u7406\u5668\u7684\u540d\u5b57\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"default_related_name")),(0,l.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4ece\u4e00\u4e2a\u6a21\u578b\u53cd\u5411\u5173\u8054\u8bbe\u7f6e\u6709\u5173\u7cfb\u5b57\u6bb5\u7684\u6e90\u6a21\u578b\uff0c\u6211\u4eec\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"<model_name>_set"),"\uff0c\u4e5f\u5c31\u662f\u6e90\u6a21\u578b\u7684\u540d\u5b57+\u4e0b\u5212\u7ebf+",(0,l.kt)("inlineCode",{parentName:"p"},"set"),"\u3002"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u5143\u6570\u636e\u9009\u9879\u53ef\u4ee5\u8ba9\u4f60\u81ea\u5b9a\u4e49\u53cd\u5411\u5173\u7cfb\u540d\uff0c\u540c\u65f6\u4e5f\u5f71\u54cd\u53cd\u5411\u67e5\u8be2\u5173\u7cfb\u540d\uff01\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"from django.db import models\n\nclass Foo(models.Model):\n    pass\n\nclass Bar(models.Model):\n    foo = models.ForeignKey(Foo, on_delete=models.CASCADE)\n\n    class Meta:\n        default_related_name = 'bars'   # \u5173\u952e\u5728\u8fd9\u91cc\n")),(0,l.kt)("p",null,"\u5177\u4f53\u7684\u4f7f\u7528\u5dee\u522b\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'>>> bar = Bar.objects.get(pk=1)\n>>> # \u4e0d\u80fd\u518d\u4f7f\u7528"bar"\u4f5c\u4e3a\u53cd\u5411\u67e5\u8be2\u7684\u5173\u952e\u5b57\u4e86\u3002\n>>> Foo.objects.get(bar=bar)\n>>> # \u800c\u8981\u4f7f\u7528\u4f60\u81ea\u5df1\u5b9a\u4e49\u7684"bars"\u4e86\u3002\n>>> Foo.objects.get(bars=bar)\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"get_latest_by")),(0,l.kt)("p",null,"Django\u7ba1\u7406\u5668\u7ed9\u6211\u4eec\u63d0\u4f9b\u6709latest()\u548cearliest()\u65b9\u6cd5\uff0c\u5206\u522b\u8868\u793a\u83b7\u53d6\u6700\u8fd1\u4e00\u4e2a\u548c\u6700\u524d\u4e00\u4e2a\u6570\u636e\u5bf9\u8c61\u3002\u4f46\u662f\uff0c\u5982\u4f55\u6765\u5224\u65ad\u6700\u8fd1\u4e00\u4e2a\u548c\u6700\u524d\u9762\u4e00\u4e2a\u5462\uff1f\u4e5f\u5c31\u662f\u6839\u636e\u4ec0\u4e48\u6765\u6392\u5e8f\u5462\uff1f"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"get_latest_by"),"\u5143\u6570\u636e\u9009\u9879\u5e2e\u4f60\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5b83\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u7c7b\u4f3c ",(0,l.kt)("inlineCode",{parentName:"p"},"DateField"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"DateTimeField"),"\u6216\u8005",(0,l.kt)("inlineCode",{parentName:"p"},"IntegerField"),"\u8fd9\u79cd\u53ef\u4ee5\u6392\u5e8f\u7684\u5b57\u6bb5\uff0c\u4f5c\u4e3alatest()\u548cearliest()\u65b9\u6cd5\u7684\u6392\u5e8f\u4f9d\u636e\uff0c\u4ece\u800c\u5f97\u51fa\u6700\u8fd1\u4e00\u4e2a\u6216\u6700\u524d\u9762\u4e00\u4e2a\u5bf9\u8c61\u3002\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"get_latest_by = \"order_date\"   # \u6839\u636eorder_date\u5347\u5e8f\u6392\u5217\n\nget_latest_by = ['-priority', 'order_date']  # \u6839\u636epriority\u964d\u5e8f\u6392\u5217\uff0c\u5982\u679c\u53d1\u751f\u540c\u5e8f\uff0c\u5219\u63a5\u7740\u4f7f\u7528order_date\u5347\u5e8f\u6392\u5217\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"managed")),(0,l.kt)("p",null,"\u8be5\u5143\u6570\u636e\u9ed8\u8ba4\u503c\u4e3aTrue\uff0c\u8868\u793aDjango\u5c06\u6309\u7167\u65e2\u5b9a\u7684\u89c4\u5219\uff0c\u7ba1\u7406\u6570\u636e\u5e93\u8868\u7684\u751f\u547d\u5468\u671f\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u8bbe\u7f6e\u4e3aFalse\uff0c\u5c06\u4e0d\u4f1a\u9488\u5bf9\u5f53\u524d\u6a21\u578b\u521b\u5efa\u548c\u5220\u9664\u6570\u636e\u5e93\u8868\uff0c\u4e5f\u5c31\u662f\u8bf4Django\u6682\u65f6\u4e0d\u7ba1\u8fd9\u4e2a\u6a21\u578b\u4e86\u3002"),(0,l.kt)("p",null,"\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u8fd9\u53ef\u80fd\u6709\u7528\uff0c\u4f46\u66f4\u591a\u65f6\u5019\uff0c\u4f60\u53ef\u4ee5\u5fd8\u8bb0\u8be5\u9009\u9879\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"order_with_respect_to")),(0,l.kt)("p",null,"\u8fd9\u4e2a\u9009\u9879\u4e0d\u597d\u7406\u89e3\u3002\u5176\u7528\u9014\u662f\u6839\u636e\u6307\u5b9a\u7684\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f\uff0c\u901a\u5e38\u7528\u4e8e\u5173\u7cfb\u5b57\u6bb5\u3002\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"from django.db import models\n\nclass Question(models.Model):\n    text = models.TextField()\n    # ...\n\nclass Answer(models.Model):\n    question = models.ForeignKey(Question, on_delete=models.CASCADE)\n    # ...\n\n    class Meta:\n        order_with_respect_to = 'question'\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u5728Answer\u6a21\u578b\u4e2d\u8bbe\u7f6e\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"order_with_respect_to = 'question'"),"\uff0c\u8fd9\u6837\u7684\u8bdd\uff0cDjango\u4f1a\u81ea\u52a8\u63d0\u4f9b\u4e24\u4e2aAPI\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"get_RELATED_order()"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"set_RELATED_order()"),"\uff0c\u5176\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"RELATED"),"\u7528\u5c0f\u5199\u7684\u6a21\u578b\u540d\u4ee3\u66ff\u3002\u5047\u8bbe\u73b0\u5728\u6709\u4e00\u4e2aQuestion\u5bf9\u8c61\uff0c\u5b83\u5173\u8054\u7740\u591a\u4e2aAnswer\u5bf9\u8c61\uff0c\u4e0b\u9762\u7684\u64cd\u4f5c\u8fd4\u56de\u5305\u542b\u5173\u8054\u7684Anser\u5bf9\u8c61\u7684\u4e3b\u952e\u7684\u5217\u8868","[1,2,3]","\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},">>> question = Question.objects.get(id=1)\n>>> question.get_answer_order()\n[1, 2, 3]\n")),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"set_RELATED_order()"),"\u65b9\u6cd5\uff0c\u6307\u5b9a\u4e0a\u9762\u8fd9\u4e2a\u5217\u8868\u7684\u987a\u5e8f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},">>> question.set_answer_order([3, 1, 2])\n")),(0,l.kt)("p",null,"\u540c\u6837\u7684\uff0c\u5173\u8054\u7684\u5bf9\u8c61\u4e5f\u83b7\u5f97\u4e86\u4e24\u4e2a\u65b9\u6cd5",(0,l.kt)("inlineCode",{parentName:"p"},"get_next_in_order()"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"get_previous_in_order()"),"\uff0c\u7528\u4e8e\u901a\u8fc7\u7279\u5b9a\u7684\u987a\u5e8f\u8bbf\u95ee\u5bf9\u8c61\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},">>> answer = Answer.objects.get(id=2)\n>>> answer.get_next_in_order()\n<Answer: 3>\n>>> answer.get_previous_in_order()\n<Answer: 1>\n")),(0,l.kt)("p",null,"\u8fd9\u4e2a\u5143\u6570\u636e\u7684\u4f5c\u7528......\u8fd8\u6ca1\u7528\u8fc7\uff0c\u56e7\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"ordering")),(0,l.kt)("p",null,"\u6700\u5e38\u7528\u7684\u5143\u6570\u636e\u4e4b\u4e00\u4e86\uff01"),(0,l.kt)("p",null,"\u7528\u4e8e\u6307\u5b9a\u8be5\u6a21\u578b\u751f\u6210\u7684\u6240\u6709\u5bf9\u8c61\u7684\u6392\u5e8f\u65b9\u5f0f\uff0c\u63a5\u6536\u4e00\u4e2a\u5b57\u6bb5\u540d\u7ec4\u6210\u7684\u5143\u7ec4\u6216\u5217\u8868\u3002\u9ed8\u8ba4\u6309\u5347\u5e8f\u6392\u5217\uff0c\u5982\u679c\u5728\u5b57\u6bb5\u540d\u524d\u52a0\u4e0a\u5b57\u7b26\u201c-\u201d\u5219\u8868\u793a\u6309\u964d\u5e8f\u6392\u5217\uff0c\u5982\u679c\u4f7f\u7528\u5b57\u7b26\u95ee\u53f7\u201c\uff1f\u201d\u8868\u793a\u968f\u673a\u6392\u5217\u3002\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u987a\u5e8f\u662f\u4f60\u901a\u8fc7\u67e5\u8be2\u8bed\u53e5\uff0c\u83b7\u5f97Queryset\u540e\u7684\u5217\u8868\u5185\u5143\u7d20\u7684\u987a\u5e8f\uff0c\u5207\u4e0d\u53ef\u548c\u524d\u9762\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"get_latest_by"),"\u7b49\u6df7\u6dc6\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"ordering = ['pub_date']             # \u8868\u793a\u6309'pub_date'\u5b57\u6bb5\u8fdb\u884c\u5347\u5e8f\u6392\u5217\nordering = ['-pub_date']            # \u8868\u793a\u6309'pub_date'\u5b57\u6bb5\u8fdb\u884c\u964d\u5e8f\u6392\u5217\nordering = ['-pub_date', 'author']  # \u8868\u793a\u5148\u6309'pub_date'\u5b57\u6bb5\u8fdb\u884c\u964d\u5e8f\u6392\u5217\uff0c\u518d\u6309`author`\u5b57\u6bb5\u8fdb\u884c\u5347\u5e8f\u6392\u5217\u3002\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"permissions")),(0,l.kt)("p",null,"\u8be5\u5143\u6570\u636e\u7528\u4e8e\u5f53\u521b\u5efa\u5bf9\u8c61\u65f6\u589e\u52a0\u989d\u5916\u7684\u6743\u9650\u3002\u5b83\u63a5\u6536\u4e00\u4e2a\u6240\u6709\u5143\u7d20\u90fd\u662f\u4e8c\u5143\u5143\u7ec4\u7684\u5217\u8868\u6216\u5143\u7ec4\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"(\u6743\u9650\u4ee3\u7801, \u76f4\u89c2\u7684\u6743\u9650\u540d\u79f0)"),"\u7684\u683c\u5f0f\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a"),(0,l.kt)("p",null,"\u8fd9\u4e2aMeta\u9009\u9879\u975e\u5e38\u91cd\u8981\uff0c\u548cauth\u6846\u67b6\u7684\u6743\u9650\u7cfb\u7edf\u7d27\u5bc6\u76f8\u5173\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'permissions = (("can_deliver_pizzas", "\u53ef\u4ee5\u9001\u62ab\u8428"),)\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"default_permissions")),(0,l.kt)("p",null,"Django\u9ed8\u8ba4\u4f1a\u5728\u5efa\u7acb\u6570\u636e\u8868\u7684\u65f6\u5019\u5c31\u81ea\u52a8\u7ed9\u6240\u6709\u7684\u6a21\u578b\u8bbe\u7f6e('add', 'change', 'delete')\u7684\u6743\u9650\uff0c\u4e5f\u5c31\u662f\u589e\u5220\u6539\u3002\u4f60\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8fd9\u4e2a\u9009\u9879\uff0c\u6bd4\u5982\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u7a7a\u5217\u8868\uff0c\u8868\u793a\u4f60\u4e0d\u9700\u8981\u9ed8\u8ba4\u7684\u6743\u9650\uff0c\u4f46\u662f\u8fd9\u4e00\u64cd\u4f5c\u5fc5\u987b\u5728\u6267\u884cmigrate\u547d\u4ee4\u4e4b\u524d\u3002\u4e5f\u662f\u914d\u5408auth\u6846\u67b6\u4f7f\u7528\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"proxy")),(0,l.kt)("p",null,"\u5982\u679c\u8bbe\u7f6e\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"proxy = True"),"\uff0c\u8868\u793a\u4f7f\u7528\u4ee3\u7406\u6a21\u5f0f\u7684\u6a21\u578b\u7ee7\u627f\u65b9\u5f0f\u3002\u5177\u4f53\u5185\u5bb9\u4e0eabstract\u9009\u9879\u4e00\u6837\uff0c\u53c2\u8003\u6a21\u578b\u7ee7\u627f\u7ae0\u8282\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"required_db_features")),(0,l.kt)("p",null,"\u58f0\u660e\u6a21\u578b\u4f9d\u8d56\u7684\u6570\u636e\u5e93\u529f\u80fd\u3002\u6bd4\u5982","['gis_enabled']","\uff0c\u8868\u793a\u6a21\u578b\u7684\u5efa\u7acb\u4f9d\u8d56GIS\u529f\u80fd\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"required_db_vendor")),(0,l.kt)("p",null,"\u58f0\u660e\u6a21\u578b\u652f\u6301\u7684\u6570\u636e\u5e93\u3002Django\u9ed8\u8ba4\u652f\u6301",(0,l.kt)("inlineCode",{parentName:"p"},"sqlite, postgresql, mysql, oracle"),"\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"select_on_save")),(0,l.kt)("p",null,"\u51b3\u5b9a\u662f\u5426\u4f7f\u75281.6\u7248\u672c\u4e4b\u524d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"django.db.models.Model.save()"),"\u7b97\u6cd5\u4fdd\u5b58\u5bf9\u8c61\u3002\u9ed8\u8ba4\u503c\u4e3aFalse\u3002\u8fd9\u4e2a\u9009\u9879\u6211\u4eec\u901a\u5e38\u4e0d\u7528\u5173\u5fc3\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"indexes")),(0,l.kt)("p",null,"\u63a5\u6536\u4e00\u4e2a\u5e94\u7528\u5728\u5f53\u524d\u6a21\u578b\u4e0a\u7684\u7d22\u5f15\u5217\u8868\uff0c\u5982\u4e0b\u4f8b\u6240\u793a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"from django.db import models\n\nclass Customer(models.Model):\n    first_name = models.CharField(max_length=100)\n    last_name = models.CharField(max_length=100)\n\n    class Meta:\n        indexes = [\n            models.Index(fields=['last_name', 'first_name']),\n            models.Index(fields=['first_name'], name='first_name_idx'),\n        ]\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"unique_together")),(0,l.kt)("p",null,"\u8fd9\u4e2a\u5143\u6570\u636e\u662f\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\uff01\u5b83\u7b49\u540c\u4e8e\u6570\u636e\u5e93\u7684\u8054\u5408\u7ea6\u675f\uff01"),(0,l.kt)("p",null,"\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u6709\u4e00\u5f20\u7528\u6237\u8868\uff0c\u4fdd\u5b58\u6709\u7528\u6237\u7684\u59d3\u540d\u3001\u51fa\u751f\u65e5\u671f\u3001\u6027\u522b\u548c\u7c4d\u8d2f\u7b49\u7b49\u4fe1\u606f\u3002\u8981\u6c42\u662f\u6240\u6709\u7684\u7528\u6237\u552f\u4e00\u4e0d\u91cd\u590d\uff0c\u53ef\u73b0\u5728\u6709\u597d\u51e0\u4e2a\u53eb\u201c\u5f20\u4f1f\u201d\u7684\uff0c\u5982\u4f55\u533a\u522b\u5b83\u4eec\u5462\uff1f\uff08\u4e0d\u8981\u548c\u6211\u8bf4\u4e3b\u952e\u552f\u4e00\uff0c\u8fd9\u91cc\u8ba8\u8bba\u7684\u4e0d\u662f\u8fd9\u4e2a\u95ee\u9898\uff09"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u4e0d\u80fd\u6709\u4e24\u4e2a\u7528\u6237\u5728\u540c\u4e00\u4e2a\u5730\u65b9\u540c\u4e00\u65f6\u523b\u51fa\u751f\u5e76\u4e14\u90fd\u53eb\u201c\u5f20\u4f1f\u201d\uff0c\u4f7f\u7528\u8fd9\u79cd\u8054\u5408\u7ea6\u675f\uff0c\u4fdd\u8bc1\u6570\u636e\u5e93\u80fd\u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0\u7528\u6237\uff08\u4e5f\u4e0d\u8981\u548c\u6211\u8c08\u5c0f\u6982\u7387\u95ee\u9898\uff09\u3002\u5728Django\u7684\u6a21\u578b\u4e2d\uff0c\u5982\u4f55\u5b9e\u73b0\u8fd9\u79cd\u7ea6\u675f\u5462\uff1f"),(0,l.kt)("p",null,"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"unique_together"),"\uff0c\u4e5f\u5c31\u662f\u8054\u5408\u552f\u4e00\uff01"),(0,l.kt)("p",null,"\u6bd4\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"unique_together = [['name', 'birth_day', 'address'],......]\n")),(0,l.kt)("p",null,"\u8fd9\u6837\uff0c\u54ea\u6015\u6709\u4e24\u4e2a\u5728\u540c\u4e00\u5929\u51fa\u751f\u7684\u5f20\u4f1f\uff0c\u4f46\u4ed6\u4eec\u7684\u7c4d\u8d2f\u4e0d\u540c\uff0c\u4e5f\u5c31\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u7528\u6237\u3002\u4e00\u65e6\u4e09\u8005\u90fd\u76f8\u540c\uff0c\u5219\u4f1a\u88abDjango\u62d2\u7edd\u521b\u5efa\u3002\u8fd9\u4e2a\u5143\u6570\u636e\u9009\u9879\u7ecf\u5e38\u88ab\u7528\u5728admin\u540e\u53f0\uff0c\u5e76\u4e14\u5f3a\u5236\u5e94\u7528\u4e8e\u6570\u636e\u5e93\u5c42\u9762\u3002"),(0,l.kt)("p",null,"unique_together\u63a5\u6536\u4e00\u4e2a\u4e8c\u7ef4\u7684\u5217\u8868\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u7ef4\u5217\u8868\uff0c\u8868\u793a\u4e00\u7ec4\u8054\u5408\u552f\u4e00\u7ea6\u675f\uff0c\u53ef\u4ee5\u540c\u65f6\u8bbe\u7f6e\u591a\u7ec4\u7ea6\u675f\u3002\u4e3a\u4e86\u65b9\u4fbf\uff0c\u5bf9\u4e8e\u53ea\u6709\u4e00\u7ec4\u7ea6\u675f\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7b80\u5355\u5730\u4f7f\u7528\u4e00\u7ef4\u5143\u7d20\uff0c\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"unique_together = ['name', 'birth_day', 'address']\n")),(0,l.kt)("p",null,"\u8054\u5408\u552f\u4e00\u65e0\u6cd5\u4f5c\u7528\u4e8e\u666e\u901a\u7684\u591a\u5bf9\u591a\u5b57\u6bb5\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"index_together")),(0,l.kt)("p",null,"\u8054\u5408\u7d22\u5f15\uff0c\u7528\u6cd5\u548c\u7279\u6027\u7c7b\u4f3cunique_together\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/ref/models/options/#django.db.models.Options.indexes"},(0,l.kt)("inlineCode",{parentName:"a"},"indexes"))," \u9009\u9879\u4ee3\u66ff\u3002"),(0,l.kt)("p",{parentName:"blockquote"},"\u65b0\u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/ref/models/options/#django.db.models.Options.indexes"},(0,l.kt)("inlineCode",{parentName:"a"},"indexes"))," \u9009\u9879\u6bd4 ",(0,l.kt)("inlineCode",{parentName:"p"},"index_together")," \u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u529f\u80fd\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"index_together")," \u4eca\u540e\u53ef\u80fd\u4f1a\u88ab\u5e9f\u5f03\u3002")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"constraints")),(0,l.kt)("p",null,"\u4e3a\u6a21\u578b\u6dfb\u52a0\u7ea6\u675f\u6761\u4ef6\u3002\u901a\u5e38\u662f\u5217\u8868\u7684\u5f62\u5f0f\uff0c\u6bcf\u4e2a\u5217\u8868\u5143\u7d20\u5c31\u662f\u4e00\u4e2a\u7ea6\u675f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"from django.db import models\n\nclass Customer(models.Model):\n    age = models.IntegerField()\n\n    class Meta:\n        constraints = [\n            models.CheckConstraint(check=models.Q(age__gte=18), name='age_gte_18'),\n        ]\n")),(0,l.kt)("p",null,"\u4e0a\u4f8b\u4e2d\uff0c\u4f1a\u68c0\u67e5age\u5e74\u9f84\u7684\u5927\u5c0f\uff0c\u4e0d\u5f97\u4f4e\u4e8e18\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"verbose_name")),(0,l.kt)("p",null,"\u6700\u5e38\u7528\u7684\u5143\u6570\u636e\u4e4b\u4e00\uff01\u7528\u4e8e\u8bbe\u7f6e\u6a21\u578b\u5bf9\u8c61\u7684\u76f4\u89c2\u3001\u4eba\u7c7b\u53ef\u8bfb\u7684\u540d\u79f0\uff0c\u7528\u4e8e\u5728\u5404\u79cd\u6253\u5370\u3001\u9875\u9762\u5c55\u793a\u7b49\u573a\u666f\u3002\u53ef\u4ee5\u7528\u4e2d\u6587\u3002\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'verbose_name = "story"\nverbose_name = "\u62ab\u8428"\n')),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u4e0d\u6307\u5b9a\u5b83\uff0c\u90a3\u4e48Django\u4f1a\u4f7f\u7528\u5c0f\u5199\u7684\u6a21\u578b\u540d\u4f5c\u4e3a\u9ed8\u8ba4\u503c\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"verbose_name_plural")),(0,l.kt)("p",null,"\u82f1\u8bed\u6709\u5355\u6570\u548c\u590d\u6570\u5f62\u5f0f\u3002\u8fd9\u4e2a\u5c31\u662f\u6a21\u578b\u5bf9\u8c61\u7684\u590d\u6570\u540d\uff0c\u6bd4\u5982\u201capples\u201d\u3002\u56e0\u4e3a\u6211\u4eec\u4e2d\u6587\u901a\u5e38\u4e0d\u533a\u5206\u5355\u590d\u6570\uff0c\u6240\u4ee5\u4fdd\u6301\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"verbose_name"),"\u4e00\u81f4\u4e5f\u53ef\u4ee5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'verbose_name_plural = "stories"\nverbose_name_plural = "\u62ab\u8428"\nverbose_name_plural = verbose_name\n')),(0,l.kt)("p",null,"\u5982\u679c\u4e0d\u6307\u5b9a\u8be5\u9009\u9879\uff0c\u90a3\u4e48\u9ed8\u8ba4\u7684\u590d\u6570\u540d\u5b57\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"verbose_name"),"\u52a0\u4e0a\u2018s\u2019"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"label")),(0,l.kt)("p",null,"\u524d\u9762\u4ecb\u7ecd\u7684\u5143\u6570\u636e\u90fd\u662f\u53ef\u4fee\u6539\u548c\u8bbe\u7f6e\u7684\uff0c\u4f46\u8fd8\u6709\u4e24\u4e2a\u53ea\u8bfb\u7684\u5143\u6570\u636e\uff0clabel\u5c31\u662f\u5176\u4e2d\u4e4b\u4e00\u3002"),(0,l.kt)("p",null,"label\u7b49\u540c\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"app_label.object_name"),"\u3002\u4f8b\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"polls.Question"),"\uff0cpolls\u662f\u5e94\u7528\u540d\uff0cQuestion\u662f\u6a21\u578b\u540d\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"label_lower")),(0,l.kt)("p",null,"\u540c\u4e0a\uff0c\u4e0d\u8fc7\u662f\u5c0f\u5199\u7684\u6a21\u578b\u540d\u3002"),(0,l.kt)("h3",{id:"45-\u4e8b\u52a1"},"4.5 \u4e8b\u52a1"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://www.jianshu.com/p/36af33d4eb42"},"\u539f\u535a\u6587")),(0,l.kt)("h3",{id:"46-\u914d\u7f6e\u591a\u6570\u636e\u5e93"},"4.6 \u914d\u7f6e\u591a\u6570\u636e\u5e93",(0,l.kt)("a",{parentName:"h3",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/db/multi-db/#multiple-databases"},"\xb6")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.0/topics/db/multi-db/"},"\u5b98\u65b9\u6587\u6863")),(0,l.kt)("h3",{id:"47-\u67e5\u8be2"},"4.7 \u67e5\u8be2"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u590d\u6742\u67e5\u8be2")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"# \u5e97\u94fa\u5546\u54c1\ndef mygoods(request, shop_id):\n    if request.method == \"GET\":\n        try:\n            # \u5356\u5bb6\u6570\u91cf\u8303\u56f4\u533a\u95f4\n            seller_volume_from = request.GET.get('seller_volume_from')\n            seller_volume_to = request.GET.get('seller_volume_to')\n            # \u8bc4\u8bba\u6570\u91cf\u8303\u56f4\u533a\u95f4\n            comment_volume_from = request.GET.get('comment_volume_from')\n            comment_volume_to = request.GET.get('comment_volume_to')\n            # \u4e0a\u4f20\u65f6\u95f4\u8303\u56f4\u533a\u95f4\n            upload_date_from = request.GET.get('upload_date_from')\n            upload_date_to = request.GET.get('upload_date_to')\n            # \u5173\u952e\u8bcd\u6a21\u7cca\u67e5\u8be2\n            search_amazon = request.GET.get('search_amazon')\n            \n            # ***********************************************************************\n            \n            # \u5b9a\u4e49\u4e00\u4e2a\u603b\u7684Q\u5bf9\u8c61\uff0c\u628a\u4e0b\u8fb9\u7684q1\uff0cq2\u5bf9\u8c61\u6dfb\u52a0\u8fdb\u53bb\n            con = Q()\n            q1 = Q()\n            q1.connector = 'AND' # q1\u5bf9\u8c61\u8868\u793a\u2018AND\u2019\u5173\u7cfb\uff0c\u4e5f\u5c31\u662f\u8bf4q1\u4e0b\u7684\u6761\u4ef6\u90fd\u8981\u6ee1\u8db3\u2018AND\u2019\n            # \u5224\u65ad\u524d\u53f0\u4f20\u8fc7\u6765\u7684\u503c\u662f\u5426\u5b58\u5728\uff0c\u5b58\u5728\u7684\u8bdd\u8ffd\u52a0\u5230\u53bbQ\u5bf9\u8c61\u4e2d\uff0c\u4e0d\u5b58\u5728\u7684\u8bdd\u53ef\u4ee5\u8d4b\u4e00\u4e2a\u7a7a\u503c\n            if comment_volume_from:\n                q1.children.append(('comment_volume__gte', int(comment_volume_from)))\n            else:\n                comment_volume_from = \"\"\n\n            if comment_volume_to:\n                q1.children.append(('comment_volume__lte', int(comment_volume_to)))\n            else:\n                comment_volume_to = \"\"\n\n            \n            # \u5bf9\u65f6\u95f4\u7c7b\u578b\u7684\u67e5\u8be2\u8fdb\u884c\u4e00\u4e2a\u8f6c\u6362\u683c\u5f0f\u7684\u5904\u7406\uff08str\u8f6cdate\uff09\n            if upload_date_from:\n                upload_date_from = datetime.strptime(upload_date_from, \"%Y-%m-%d\")\n                upload_date_from = datetime.date(upload_date_from)\n                q1.children.append(('upload_date__gte', upload_date_from))\n            else:\n                upload_date_from = \"\"\n            \n            # ***********************************************************************\n            \n            q2 = Q()\n            q2.connector = 'OR' # q2\u5bf9\u8c61\u8868\u793a\u2018OR\u2019\u5173\u7cfb\uff0c\u4e5f\u5c31\u662f\u8bf4q2\u4e0b\u7684\u6761\u4ef6\u90fd\u8981\u6ee1\u8db3\u2018OR\u2019\n            if search_amazon:\n                search_amazon = search_amazon.strip() # \u53bb\u9664\u5b57\u7b26\u4e32\u5de6\u53f3\u7a7a\u683c\n            \n                # \u52a0\u4e0a\u2018__contains\u2019\u8868\u793a\u5305\u542b\uff0c\u53ef\u4ee5\u8fbe\u6210\u6a21\u7cca\u67e5\u8be2\u7684\u76ee\u7684\uff0c\u76ee\u524d\u6a21\u7cca\u67e5\u8be2\u53ea\u5bf9\u8fd9\u4e24\u4e2a\n                # \u5b57\u6bb5\u8fdb\u884c\u5339\u914d\uff0c\u5982\u679c\u6709\u591a\u4e2a\u7684\u8bdd\u5c31\u5f80\u4e0b\u8fb9\u7ee7\u7eed\u6dfb\u52a0,\u5982\u679c\u4e0d\u662f\u6a21\u7cca\u67e5\u8be2\u53bb\u6389\u2018__contains\u2019\u5373\u53ef\n                q2.children.append(('product_name__contains', search_amazon))\n                q2.children.append(('ASIN__contains', search_amazon))\n            else:\n                search_amazon = \"\"\n                \n            # \u628aq1\u548cq2\u5bf9\u8c61\u6dfb\u52a0\u5230\u603b\u7684Q\u5bf9\u8c61\n            con.add(q1, 'AND')\n            con.add(q2, 'AND')\n\n            # ***********************************************************************\n\n            # \u67e5\u8be2\u6570\u636e\uff08\u628acon\u8fd9\u4e2a\u603b\u7684Q\u5bf9\u8c61\u6dfb\u52a0\u5230filter\u8fc7\u6ee4\u6761\u4ef6\u4e2d\uff0c\u8fd8\u53ef\u4ee5\u5728con\u540e\u8fb9\u7ee7\u7eed\u6dfb\u52a0\u8fc7\u6ee4\u6761\u4ef6\uff09\n            goods = MapMyShopGoods.objects.filter(con, shop=shop_id)\n            \n            # \u8c03\u7528\u5206\u9875\n            goods_list = mygoods_page_goods(request, goods)['goods_list']\n            page_list = mygoods_page_goods(request, goods)['page_list']\n            goods_count = goods.count()\n\n            return render(request, 'amazonshop/mygoods.html', locals())\n        except Exception as e:\n            print('\u5e97\u94fa\u5546\u54c1---', e, str(e.__traceback__.tb_lineno))\n            return render(request, 'amazonshop/mygoods.html', locals())\n\n")),(0,l.kt)("h2",{id:"django\u7f13\u5b58"},"Django\u7f13\u5b58"),(0,l.kt)("h3",{id:"\u914d\u7f6e\u7f13\u5b58"},"\u914d\u7f6e\u7f13\u5b58"),(0,l.kt)("p",null,"\u5728settings.py\u4e2d\u914d\u7f6e\u4e00\u4e2a\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"CACHES"),"\u7684\u5b57\u5178\uff0c\u5b57\u5178\u4e2d\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\u7f13\u5b58\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',\n        'LOCATION': os.path.join(BASE_DIR, 'caches'),\n    },\n    '\u7f13\u5b58\u914d\u7f6e\u540d': {\n        '\u7f13\u5b58\u914d\u7f6e\u9879': '\u914d\u7f6e\u503c'\n    }\n}\n")),(0,l.kt)("h3",{id:"\u7f13\u5b58\u914d\u7f6e\u7c7b\u578b"},"\u7f13\u5b58\u914d\u7f6e\u7c7b\u578b"),(0,l.kt)("h4",{id:"\u6570\u636e\u5e93\u7f13\u5b58"},(0,l.kt)("strong",{parentName:"h4"},"\u6570\u636e\u5e93\u7f13\u5b58")),(0,l.kt)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u521b\u5efa\u5b8c\u6570\u636e\u5e93\u7f13\u5b58\u540e\u8fd8\u9700\u8981\u624b\u52a8\u6267\u884c\u4e00\u6761\u547d\u4ee4\u6765\u521b\u5efa\u6570\u636e\u5e93\u8868\uff1a\n",(0,l.kt)("inlineCode",{parentName:"p"},"python manage.py createcachetable")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.db.DatabaseCache',\n        'LOCATION': 'my_cache_table',\n        'TIMEOUT': '300',  # \u7f13\u5b58\u4fdd\u5b58\u65f6\u95f4 \u5355\u4f4d\u79d2\uff0c\u9ed8\u8ba4\u4e3a300\n        'OPTIONS': {\n            'MAX_ENTRIES': 300,  # \u7f13\u5b58\u6700\u5927\u6570\u636e\u6761\u6570\n            'CULL_FREQUENCY': 2,  # \u7f13\u5b58\u6761\u6570\u8fbe\u5230\u6700\u5927\u503c\u65f6\uff0c\u5220\u96641/x\u7684\u7f13\u5b58\u6570\u636e\n        }\n    }\n}\n")),(0,l.kt)("h4",{id:"\u6587\u4ef6\u7f13\u5b58"},(0,l.kt)("strong",{parentName:"h4"},"\u6587\u4ef6\u7f13\u5b58")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',\n        'LOCATION': os.path.join(BASE_DIR, 'caches'),\n    }\n}\n")),(0,l.kt)("h4",{id:"\u57fa\u4e8e\u672c\u5730\u5185\u5b58\u7684\u7f13\u5b58"},(0,l.kt)("strong",{parentName:"h4"},"\u57fa\u4e8e\u672c\u5730\u5185\u5b58\u7684\u7f13\u5b58")),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u7684\u672c\u5730\u4e3b\u673a\u5185\u5b58\u591f\u5927\u591f\u5feb\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5b83\u4f5c\u4e3a\u7f13\u5b58\uff0c\u5e76\u4e14\u8fd9\u4e5f\u662fDjango\u9ed8\u8ba4\u4f7f\u7528\u7684\u7f13\u5b58\u540e\u7aef\u3002\u914d\u7f6e\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',\n        'LOCATION': 'unique-snowflake',\n    }\n}\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"LOCATION")," \u88ab\u7528\u4e8e\u6807\u8bc6\u5404\u4e2a\u5185\u5b58\u5b58\u50a8\u4f4d\u7f6e\u3002\u5982\u679c\u53ea\u6709\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"locmem")," \u7f13\u5b58\uff0c\u4f60\u53ef\u4ee5\u5ffd\u7565 ",(0,l.kt)("inlineCode",{parentName:"p"},"LOCATION")," \u3002\u4f46\u662f\u5982\u679c\u4f60\u6709\u591a\u4e2a\u672c\u5730\u5185\u5b58\u7f13\u5b58\uff0c\u90a3\u4e48\u4f60\u81f3\u5c11\u8981\u4e3a\u5176\u4e2d\u4e00\u4e2a\u8d77\u4e2a\u540d\u5b57\uff0c\u4ee5\u4fbf\u5c06\u5b83\u4eec\u533a\u5206\u5f00\u3002"),(0,l.kt)("p",null,"\u8fd9\u79cd\u7f13\u5b58\u4f7f\u7528\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\uff08LRU\uff09\u7684\u6dd8\u6c70\u7b56\u7565\u3002"),(0,l.kt)("h4",{id:"memcached"},(0,l.kt)("strong",{parentName:"h4"},"Memcached")),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u662f\u65b0\u624b\uff0c\u90a3\u4e48\u8981\u6e05\u695a\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Memcached\u4e0d\u662fDjango\u81ea\u5e26\u7684\u8f6f\u4ef6\uff0c\u800c\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u8f6f\u4ef6\uff0c\u9700\u8981\u4f60\u81ea\u5df1\u5b89\u88c5\u3001\u914d\u7f6e\u548c\u542f\u52a8\u670d\u52a1\uff1b"),(0,l.kt)("li",{parentName:"ul"},"Memcached\u5b89\u88c5\u597d\u4e86\u540e\uff0c\u8fd8\u8981\u5b89\u88c5Python\u64cd\u4f5cMemcached\u7684\u4f9d\u8d56\u5e93\uff0c\u6700\u5e38\u7528\u7684\u662fpython-memcached\u548cpylibmc\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u4e0a\u9762\u4e24\u4e2a\u6761\u4ef6\u90fd\u6ee1\u8db3\u4e86\u540e\uff0c\u8fd8\u8981\u5728Django\u4e2d\u8fdb\u884c\u914d\u7f6e\u3002")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u914d\u7f6e\u65b9\u6cd5\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6839\u636e\u4f60\u5b89\u88c5\u7684Python\u4f9d\u8d56\u5e93\u4e0d\u540c\uff0c\u5c06CACHES\u7684BACKEND\u8bbe\u7f6e\u4e3adjango.core.cache.backends.memcached.MemcachedCache\u6216\u8005django.core.cache.backends.memcached.PyLibMCCache"),(0,l.kt)("li",{parentName:"ul"},"\u8bbe\u7f6eLOCATION\u4e3a\u4f60\u7684Memecached\u5b88\u62a4\u8fdb\u7a0b\u6240\u5728\u7684\u4e3b\u673aIP\u548c\u8fdb\u7a0b\u7aef\u53e3\uff0c\u683c\u5f0f\u4e3aip:port\u7684\u5b57\u7b26\u4e32\u3002\u6216\u8005unix:path\u7684\u5f62\u5f0f\uff0c\u5728Unix\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u3002")),(0,l.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u53c2\u8003\u4f8b\u5b50\uff0cMemcached\u8fd0\u884c\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"localhost (127.0.0.1) port 11211"),"\uff0c\u4f7f\u7528\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"python-memcached"),"\u5e93\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': '127.0.0.1:11211',\n    }\n}\n")),(0,l.kt)("p",null,"\u4e0b\u9762\u7684Memcached\u8fd0\u884c\u5728\u672c\u5730\u7684Unix socket\u4e0a\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"/tmp/memcached.sock"),"\uff0c\u4f9d\u8d56",(0,l.kt)("inlineCode",{parentName:"p"},"python-memcached"),"\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': 'unix:/tmp/memcached.sock',\n    }\n}\n")),(0,l.kt)("p",null,"\u4e0b\u9762\u7684Memcached\u8fd0\u884c\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"/tmp/memcached.sock"),"\uff0c\u4e0d\u5e26",(0,l.kt)("inlineCode",{parentName:"p"},"unix:/"),"\u524d\u7f00\uff0c\u4f9d\u8d56pylibmc\u5e93\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.PyLibMCCache',\n        'LOCATION': '/tmp/memcached.sock',\n    }\n}\n")),(0,l.kt)("p",null,"Memcached\u652f\u6301\u5206\u5e03\u5f0f\u670d\u52a1\uff0c\u53ef\u80fd\u540c\u65f6\u5728\u51e0\u53f0\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u5c06\u5b83\u4eec\u7684IP\u5730\u5740\u90fd\u52a0\u5165\u5230LOCATION\u4e2d\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': [\n            '172.19.26.240:11211',\n            '172.19.26.242:21423',\n            '172.19.26.244:11213',\n        ]\n        # \u6211\u4eec\u4e5f\u53ef\u4ee5\u7ed9\u7f13\u5b58\u673a\u5668\u52a0\u6743\u91cd\uff0c\u6743\u91cd\u9ad8\u7684\u627f\u62c5\u66f4\u591a\u7684\u8bf7\u6c42\uff0c\u5982\u4e0b\n        'LOCATION': [\n            ('172.19.26.240:11211',5),\n            ('172.19.26.242:11211',1),\n        ]\n    }\n}\n")),(0,l.kt)("p",null,"\u57fa\u4e8e\u5185\u5b58\u7684\u7f13\u5b58\u7cfb\u7edf\u6709\u4e2a\u660e\u663e\u7684\u7f3a\u70b9\u5c31\u662f\u65ad\u7535\u6570\u636e\u4e22\u5931\uff0c\u5c24\u5176\u662fMemcached\u8fd9\u79cd\u4e0d\u652f\u6301\u5e8f\u5217\u5316\u7684\u7f13\u5b58"),(0,l.kt)("h4",{id:"\u57fa\u4e8eredis\u7f13\u5b58"},(0,l.kt)("strong",{parentName:"h4"},"\u57fa\u4e8eredis\u7f13\u5b58")),(0,l.kt)("p",null,"\u57fa\u4e8eredis\u7f13\u5b58\u9700\u6c42\u5b89\u88c5redis\u4f9d\u8d56\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"pip install django-redis")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'CACHES = {\n    "default": {\n        "BACKEND": "django_redis.cache.RedisCache",\n        "LOCATION": \'redis://127.0.0.1:6379/1\',\n        "OPTIONS": {\n            "CLIENT_CLASS": "django_redis.client.DefaultClient",\n            "CONNECTION_POOL_KWARGS": {"max_connections": 100},\n            "MAX_ENTRIES": 500,\n            # "PASSWORD": env.REDIS_PASSWORD,\n        },\n        "KEY_FUNCTION": "make_key.func"\n    }\n}\n')),(0,l.kt)("h3",{id:"\u7f13\u5b58\u914d\u7f6e\u53c2\u6570"},"\u7f13\u5b58\u914d\u7f6e\u53c2\u6570"),(0,l.kt)("p",null,"\u6bcf\u4e2a\u7f13\u5b58\u540e\u7aef\u53ef\u4ee5\u901a\u8fc7\u989d\u5916\u7684\u53c2\u6570\u6765\u63a7\u5236\u7f13\u5b58\u884c\u4e3a\u3002\u8fd9\u4e9b\u53c2\u6570\u5728 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-CACHES"},(0,l.kt)("inlineCode",{parentName:"a"},"CACHES"))," \u914d\u7f6e\u4e2d\u4f5c\u4e3a\u9644\u52a0\u952e\u63d0\u4f9b\u3002\u6709\u6548\u53c2\u6570\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-CACHES-TIMEOUT"},(0,l.kt)("inlineCode",{parentName:"a"},"TIMEOUT"))," \uff1a\u7f13\u5b58\u7684\u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002\u8fd9\u4e2a\u53c2\u6570\u9ed8\u8ba4\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"300")," \u79d2\uff085 \u5206\u949f\uff09\u3002\u4f60\u53ef\u4ee5\u5c06 ",(0,l.kt)("inlineCode",{parentName:"p"},"TIMEOUT")," \u8bbe\u7f6e\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"None"),"\uff0c\u8fd9\u6837\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7f13\u5b58\u952e\u6c38\u8fdc\u4e0d\u4f1a\u8fc7\u671f\u3002\u503c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"0")," \u4f1a\u5bfc\u81f4\u952e\u7acb\u5373\u8fc7\u671f\uff08\u5b9e\u9645\u4e0a\u662f \u201c\u4e0d\u7f13\u5b58\u201d\uff09\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-CACHES-OPTIONS"},(0,l.kt)("inlineCode",{parentName:"a"},"OPTIONS"))," \uff1a\u4efb\u4f55\u5e94\u8be5\u4f20\u9012\u7ed9\u7f13\u5b58\u540e\u7aef\u7684\u9009\u9879\u3002\u6709\u6548\u7684\u9009\u9879\u5217\u8868\u4f1a\u968f\u7740\u6bcf\u4e2a\u540e\u7aef\u800c\u53d8\u5316\uff0c\u7531\u7b2c\u4e09\u65b9\u5e93\u652f\u6301\u7684\u7f13\u5b58\u540e\u7aef\u4f1a\u76f4\u63a5\u5c06\u5176\u9009\u9879\u4f20\u9012\u7ed9\u5e95\u5c42\u7f13\u5b58\u5e93\u3002"),(0,l.kt)("p",{parentName:"li"},"\u5b9e\u65bd\u81ea\u6709\u7f13\u5b58\u7b56\u7565\u7684\u7f13\u5b58\u540e\u7aef\uff08\u5373 ",(0,l.kt)("inlineCode",{parentName:"p"},"locmem"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"filesystem")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"database")," \u540e\u7aef\uff09\u5c06\u5c0a\u91cd\u4ee5\u4e0b\u9009\u9879\uff1a"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"MAX_ENTRIES")," \uff1a\u5220\u9664\u65e7\u503c\u4e4b\u524d\u5141\u8bb8\u7f13\u5b58\u7684\u6700\u5927\u6761\u76ee\u3002\u9ed8\u8ba4\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"300")," \u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"CULL_FREQUENCY")," \uff1a\u5f53\u8fbe\u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"MAX_ENTRIES")," \u65f6\uff0c\u88ab\u5220\u9664\u7684\u6761\u76ee\u7684\u6bd4\u4f8b\u3002\u5b9e\u9645\u6bd4\u4f8b\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"1 / CULL_FREQUENCY"),"\uff0c\u6240\u4ee5\u5c06 ",(0,l.kt)("inlineCode",{parentName:"p"},"CULL_FREQUENCY")," \u8bbe\u7f6e\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"2"),"\uff0c\u5373\u5f53\u8fbe\u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"MAX_ENTRIES")," \u65f6\u5c06\u5220\u9664\u4e00\u534a\u7684\u6761\u76ee\u3002\u8fd9\u4e2a\u53c2\u6570\u5e94\u8be5\u662f\u4e00\u4e2a\u6574\u6570\uff0c\u9ed8\u8ba4\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"3"),"\u3002"),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"CULL_FREQUENCY")," \u7684\u503c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"0")," \u610f\u5473\u7740\u5f53\u8fbe\u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"MAX_ENTRIES")," \u65f6\uff0c\u6574\u4e2a\u7f13\u5b58\u5c06\u88ab\u8f6c\u50a8\u3002\u5728\u67d0\u4e9b\u540e\u7aef\uff08\u7279\u522b\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"database")," \uff09\uff0c\u8fd9\u4f7f\u5f97\u7f13\u5b58\u901f\u5ea6 ",(0,l.kt)("em",{parentName:"p"},"\u66f4")," \u5feb\uff0c\u4f46\u4ee3\u4ef7\u662f\u7f13\u5b58\u672a\u547d\u4e2d\u66f4\u591a\u3002"))),(0,l.kt)("p",{parentName:"li"},"Memcached \u540e\u7aef\u5c06 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-CACHES-OPTIONS"},(0,l.kt)("inlineCode",{parentName:"a"},"OPTIONS"))," \u7684\u5185\u5bb9\u4f5c\u4e3a\u5173\u952e\u5b57\u53c2\u6570\u4f20\u9012\u7ed9\u5ba2\u6237\u7aef\u6784\u9020\u51fd\u6570\uff0c\u5141\u8bb8\u5bf9\u5ba2\u6237\u7aef\u884c\u4e3a\u8fdb\u884c\u66f4\u9ad8\u7ea7\u7684\u63a7\u5236\u3002\u5177\u4f53\u7528\u6cd5\u8bf7\u770b\u4e0b\u6587",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/topics/cache/#cache-arguments"},"\xb6"),"\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-CACHES-KEY_PREFIX"},(0,l.kt)("inlineCode",{parentName:"a"},"KEY_PREFIX")),"\u3002\u4e00\u4e2a\u81ea\u52a8\u5305\u542b\u5728 Django \u670d\u52a1\u5668\u4f7f\u7528\u7684\u6240\u6709\u7f13\u5b58\u952e\u4e2d\u7684\u5b57\u7b26\u4e32\uff08\u9ed8\u8ba4\u4e3a\u524d\u7f00\uff09\u3002"),(0,l.kt)("p",{parentName:"li"},"\u67e5\u770b ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/topics/cache/#cache-key-prefixing"},"\u7f13\u5b58\u6587\u6863")," \u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-CACHES-VERSION"},(0,l.kt)("inlineCode",{parentName:"a"},"VERSION"))," \uff1aDjango \u670d\u52a1\u5668\u751f\u6210\u7684\u7f13\u5b58\u952e\u7684\u9ed8\u8ba4\u7248\u672c\u53f7\u3002"),(0,l.kt)("p",{parentName:"li"},"\u67e5\u770b ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/topics/cache/#cache-versioning"},"\u7f13\u5b58\u6587\u6863")," \u83b7\u53d6\u66f4\u591a\u4fe1\u606f\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/ref/settings/#std:setting-CACHES-KEY_FUNCTION"},(0,l.kt)("inlineCode",{parentName:"a"},"KEY_FUNCTION"))," \u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5305\u542b\u4e00\u4e2a\u51fd\u6570\u7684\u70b9\u5206\u9694\u8def\u5f84\uff0c\u8be5\u51fd\u6570\u5b9a\u4e49\u4e86\u5982\u4f55\u5c06\u524d\u7f00\u3001\u7248\u672c\u548c\u952e\u7ec4\u6210\u4e00\u4e2a\u6700\u7ec8\u7684\u7f13\u5b58\u952e\u3002"),(0,l.kt)("p",{parentName:"li"},"\u67e5\u770b ",(0,l.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/zh-hans/3.2/topics/cache/#cache-key-transformation"},"\u7f13\u5b58\u6587\u6863")," \u83b7\u53d6\u66f4\u591a\u4fe1\u606f"))),(0,l.kt)("p",null,"\u81ea\u5b9a\u4e49KEY_FUNCTION"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def make_key(key, key_prefix, version):\n    return ':'.join([\"key_start\", key_prefix, str(version), key])\n")),(0,l.kt)("h3",{id:"\u7f13\u5b58\u7c92\u5ea6"},"\u7f13\u5b58\u7c92\u5ea6"),(0,l.kt)("h4",{id:"\u5355\u9875\u7f13\u5b58"},(0,l.kt)("strong",{parentName:"h4"},"\u5355\u9875\u7f13\u5b58")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from django.views.decorators.cache import cache_page\n\n@cache_page(5)  # \u7f13\u5b585s\u949f\ndef test_cache(request):\n    """\u914d\u7f6e\u7f13\u5b58\u4e4b\u540e\uff0c\u5f53\u4f60\u4e94\u79d2\u949f\u4e4b\u5185\u8fdb\u884c\u8bbf\u95ee\uff0c\u65f6\u95f4\u5c06\u4f1a\u4e00\u6210\u4e0d\u53d8\u3002"""\n    import time\n    ctime=time.time()\n    return render(request,\'index.html\',context={\'ctime\':ctime})\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"cache_page"),"\u6709\u4e00\u4e2a\u5fc5\u586b\u53c2\u6570\uff0c\u7f13\u5b58\u65f6\u9650\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u7406\u89e3\uff0c\u53ef\u4ee5\u5199\u6210\u8868\u8fbe\u5f0f\u5f62\u5f0f\uff0c\u5982\u4e0a",(0,l.kt)("inlineCode",{parentName:"p"},"60 * 15"),"\u5373900\u79d2\u3002\u5176\u4ed6\u9009\u586b\u53c2\u6570\u6709cache\uff1a\u6307\u5b9a\u5176\u4ed6\u7684\u7f13\u5b58\u7c7b\u578b\uff1bkey_prefix\uff1a\u6307\u5b9a\u952e\u524d\u7f00\u3002"),(0,l.kt)("p",null,"\u5728URL\u914d\u7f6e\u4e2d\u4f7f\u7528\u7f13\u5b58\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.views.decorators.cache import cache_page\n\nurlpatterns = [\n    path('foo/<int:code>/', cache_page(60 * 15)(my_view)),\n]\n")),(0,l.kt)("p",null,"\u7c7b\u89c6\u56fe\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"cache_page"),"\u88c5\u9970\u5668\uff0c\u56e0\u4e3a\u88c5\u9970\u5668\u672c\u8d28\u662f\u4e2a\u51fd\u6570\uff0c\u63a5\u6536\u51fd\u6570\u5e76\u8fd4\u56de\u51fd\u6570\uff0c\u6240\u4ee5\u53ea\u8981\u628a\u7c7b\u89c6\u56fe\u8f6c\u4e3a\u51fd\u6570\u5c31\u884c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"# \u5728views.py\u4e2d\u4f7f\u7528\nclass MyView(View):\n    ...\n\nmy_view = cache_page(60 * 15)(MyView.as_view())\n\n\n\n# \u5728urls.py\u4e2d\u4f7f\u7528\nurlpatterns = [\n    path('foo/<int:code>/', cache_page(60 * 15)(MyView.as_view())),\n]\n")),(0,l.kt)("h4",{id:"\u5c40\u90e8\u7f13\u5b58"},(0,l.kt)("strong",{parentName:"h4"},"\u5c40\u90e8\u7f13\u5b58")),(0,l.kt)("p",null,"\u5728\u4e00\u4e2a\u6a21\u677f\u4e2d\uff0c\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"tag"),"\u8fdb\u884c\u5c40\u90e8\u7f13\u5b58\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},"<p>\u672a\u8fdb\u884c\u7f13\u5b58\uff1a{{ ctime }}</p>\n<hr>\n\n\x3c!--\u5bfc\u5165tage--\x3e\n{% load cache %}\n\x3c!--5\u8868\u793a5s\u949f\uff0cname\u662f\u552f\u4e00key\u503c--\x3e\n\n{% cache 5 'name' %}\n    {{ ctime }}\n{% endcache %}\n\n")),(0,l.kt)("h4",{id:"\u7f13\u5b58\u5168\u7ad9"},(0,l.kt)("strong",{parentName:"h4"},"\u7f13\u5b58\u5168\u7ad9")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"MIDDLEWARE = [\n    'django.middleware.cache.UpdateCacheMiddleware',  # \u8fd9\u4e2a\u653e\u5728\u6700\u4e0a\u9762\n    # ...  \u5176\u4ed6\u4e2d\u95f4\u4ef6\n    'django.middleware.cache.FetchFromCacheMiddleware',  # \u8fd9\u4e2a\u653e\u5728\u6700\u4e0b\u9762\n]\n")),(0,l.kt)("p",null,"\u6ce8\u610f\uff1a ",(0,l.kt)("inlineCode",{parentName:"p"},"update"),"\u4e2d\u95f4\u4ef6\u5fc5\u987b\u653e\u5728\u5217\u8868\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c\u800c",(0,l.kt)("inlineCode",{parentName:"p"},"fectch"),"\u4e2d\u95f4\u4ef6\uff0c\u5fc5\u987b\u653e\u5728\u6700\u540e\u3002 \u8fd9\u662fDjango\u4f7f\u7528\u4e2d\u95f4\u4ef6\u7684\u89c4\u5219\uff0c\u5b83\u4eec\u662f\u6709\u987a\u5e8f\u5173\u7cfb\u7684\u3002"),(0,l.kt)("h4",{id:"\u9ad8\u7ea7\u6280\u5de7"},(0,l.kt)("strong",{parentName:"h4"},"\u9ad8\u7ea7\u6280\u5de7")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f7f\u7528cache_control")),(0,l.kt)("p",null,"\u901a\u5e38\u7528\u6237\u5c06\u4f1a\u9762\u5bf9\u4e24\u79cd\u7f13\u5b58\uff1a \u4ed6\u6216\u5979\u81ea\u5df1\u7684\u6d4f\u89c8\u5668\u7f13\u5b58\uff08\u79c1\u6709\u7f13\u5b58\uff09\u4ee5\u53ca\u4ed6\u6216\u5979\u7684\u63d0\u4f9b\u8005\u7f13\u5b58\uff08\u516c\u5171\u7f13\u5b58\uff09\u3002 \u516c\u5171\u7f13\u5b58\u7531\u591a\u4e2a\u7528\u6237\u4f7f\u7528\uff0c\u800c\u53d7\u5176\u5b83\u4eba\u7684\u63a7\u5236\u3002 \u8fd9\u5c31\u4ea7\u751f\u4e86\u4f60\u4e0d\u60f3\u9047\u5230\u7684\u654f\u611f\u6570\u636e\u7684\u95ee\u9898\uff0c\u6bd4\u5982\u8bf4\u4f60\u7684\u94f6\u884c\u8d26\u53f7\u88ab\u5b58\u50a8\u5728\u516c\u4f17\u7f13\u5b58\u4e2d\u3002 \u56e0\u6b64\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u4ee5\u67d0\u79cd\u65b9\u5f0f\u544a\u8bc9\u7f13\u5b58\u90a3\u4e9b\u6570\u636e\u662f\u79c1\u6709\u7684\uff0c\u54ea\u4e9b\u662f\u516c\u5171\u7684\u3002"),(0,l.kt)("p",null,"\u89e3\u51b3\u65b9\u6848\u662f\u6807\u793a\u51fa\u67d0\u4e2a\u9875\u9762\u7f13\u5b58\u5e94\u5f53\u662f\u79c1\u6709\u7684\u3002 \u8981\u5728 Django \u4e2d\u5b8c\u6210\u6b64\u9879\u5de5\u4f5c\uff0c\u53ef\u4f7f\u7528 cache_control \u89c6\u56fe\u4fee\u9970\u5668\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.views.decorators.cache import cache_control\n \n \n@cache_control(private=True)\ndef my_view(request):\n# ...\n\n# \u5728\u4e0b\u4f8b\u4e2d\uff0c cache_control \u544a\u8bc9\u7f13\u5b58\u5bf9\u6bcf\u6b21\u8bbf\u95ee\u90fd\u91cd\u65b0\u9a8c\u8bc1\u7f13\u5b58\u5e76\u5728\u6700\u957f 3600 \u79d2\u5185\u4fdd\u5b58\u6240\u7f13\u5b58\u7248\u672c\u3002\n@cache_control(must_revalidate=True, max_age=3600)\ndef my_view(request):\n# ...\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f7f\u7528vary_on_headers")),(0,l.kt)("p",null,"\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cDjango \u7684\u7f13\u5b58\u7cfb\u7edf\u4f7f\u7528\u6240\u8bf7\u6c42\u7684\u8def\u5f84(\u5982blog/article/1)\u6765\u521b\u5efa\u5176\u7f13\u5b58\u952e\u3002\u8fd9\u610f\u5473\u7740\u4e0d\u540c\u7528\u6237\u8bf7\u6c42\u540c\u6837\u8def\u5f84\u90fd\u4f1a\u5f97\u5230\u540c\u6837\u7684\u7f13\u5b58\u7248\u672c\uff0c\u4e0d\u8003\u8651\u5ba2\u6237\u7aefuser-agent, cookie\u548c\u8bed\u8a00\u914d\u7f6e\u7684\u4e0d\u540c, \u9664\u975e\u4f60\u4f7f\u7528Vary\u5934\u90e8\u901a\u77e5\u7f13\u5b58\u673a\u5236\u9700\u8981\u8003\u8651\u8bf7\u6c42\u5934\u91cc\u7684cookie\u548c\u8bed\u8a00\u7684\u4e0d\u540c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.views.decorators.vary import vary_on_headers\n \n \n@vary_on_headers('User-Agent', 'Cookie')\ndef my_view(request):\n    ...\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f7f\u7528never_cache\u7981\u7528\u7f13\u5b58"),"\n\u5982\u679c\u4f60\u60f3\u7528\u5934\u90e8\u5b8c\u5168\u7981\u6389\u7f13\u5b58, \u4f60\u53ef\u4ee5\u4f7f\u7528django.views.decorators.cache.never_cache\u88c5\u9970\u5668\u3002\u5982\u679c\u4f60\u4e0d\u5728\u89c6\u56fe\u4e2d\u4f7f\u7528\u7f13\u5b58\uff0c\u670d\u52a1\u5668\u7aef\u662f\u80af\u5b9a\u4e0d\u4f1a\u7f13\u5b58\u7684\uff0c\u7136\u800c\u7528\u6237\u7684\u5ba2\u6237\u7aef\u5982\u6d4f\u89c8\u5668\u8fd8\u662f\u4f1a\u7f13\u5b58\u4e00\u4e9b\u6570\u636e\uff0c\u8fd9\u65f6\u4f60\u53ef\u4ee5\u4f7f\u7528never_cache\u7981\u7528\u6389\u5ba2\u6237\u7aef\u7684\u7f13\u5b58\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.views.decorators.cache import never_cache\n \n@never_cache\ndef myview(request):\n# ...\n")),(0,l.kt)("h3",{id:"\u7f13\u5b58api"},"\u7f13\u5b58API"),(0,l.kt)("p",null,"Django\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u7684API\uff0c\u53ef\u4ee5\u4fdd\u5b58\u4efb\u610f\u7c92\u5ea6\u7684\u6570\u636e\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u7c7b\u4f3c\u5b57\u5178\u7684\u5bf9\u8c61\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"django.core.cache.caches"),"\uff0c\u6765\u8bbf\u95ee\u7f13\u5b58\uff0c\u8fd9\u5141\u8bb8\u4f7f\u7528\u4e0d\u540c\u7f13\u5b58\u65b9\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from django.core.cache import caches\ncache1 = caches['default']\ncache2 = caches['others']\n")),(0,l.kt)("p",null,"\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u7f13\u5b58\u9ed8\u8ba4\u7684\u8bbe\u7f6e\uff0c\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"from django.core.cache import cache"),"\u83b7\u53d6\u9ed8\u8ba4\u7f13\u5b58\uff0c\u8fd9\u7b49\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"caches['default']"),"\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u65b9\u6cd5"),(0,l.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.set(key,value,timeout=DEFAULT_TIMEOUT,version=None)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e\u7f13\u5b58\uff0c\u5f53\u4e0d\u5b58\u5728\u65f6\u5219\u521b\u5efa\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.get(key,default=None,version=None)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6839\u636ekey\u83b7\u53d6\u7f13\u5b58\uff0c\u82e5\u4e0d\u5b58\u5728\u5219\u8fd4\u56de\u9ed8\u8ba4\u503cNone")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.add(key,value,timeout=DEFAULT_TIMEOUT,version=None)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u4e0eset\u76f8\u540c\uff0c\u5f53\u7f13\u5b58\u5df2\u5b58\u5728\u65f6\uff0c\u5c06\u4e0d\u4f1a\u66f4\u65b0\uff0c\u800cset\u5219\u4f1a\u66f4\u65b0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.get_or_set(key,default,timeout=DEFALUT_TIMEOUT,version=None)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6\u7f13\u5b58\uff0c\u5f53\u83b7\u53d6\u4e0d\u5230\u65f6\u8bbe\u7f6e\u7f13\u5b58\uff0c\u5e76\u62ff\u5230\u8bbe\u7f6e\u7684\u503c")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.get_many(key,version=None)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4f20\u5165\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u5b83\u5c06\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5b57\u5178\uff0c\u5c06\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u6240\u6709key\u5bf9\u5e94\u7684value\u53d6\u51fa")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.set_many(dict,timeout)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4f20\u5165\u4e00\u4e2adict\uff0c\u5b83\u5c06\u4f1a\u8fed\u4ee3\u8be5dict\u5e76\u4e14\u4e3a\u6bcf\u4e00\u7ec4k\uff0cv\u5b58\u653e\u5230\u7f13\u5b58\u4e2d")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.delete(key,version=None)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6e05\u9664\u7279\u5b9a\u5bf9\u8c61")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"delete_many({ list })"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6e05\u9664\u591a\u4e2a\u5bf9\u8c61")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.clear()"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6e05\u695a\u7f13\u5b58\u3002",(0,l.kt)("inlineCode",{parentName:"td"},"clear()")," \u5c06\u5220\u9664\u7f13\u5b58\u91cc\u7684 ",(0,l.kt)("em",{parentName:"td"},"\u4efb\u4f55")," \u952e")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.touch(key,timeout=DEFAULT_TIMEOUT,version=None)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5f53\u7f13\u5b58\u9a6c\u4e0a\u5230\u671f\u65f6\uff0c\u91cd\u65b0\u8bbe\u7f6e\u5b83\u7684\u8fc7\u671f\u65f6\u95f4")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.incr(key,",(0,l.kt)("em",{parentName:"td"},"delta"),"=1,version=None)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bf9\u7f13\u5b58\u4e2d\u7684\u6570\u636e\u505a\u9012\u589e\u64cd\u4f5c\uff0c\u5982k\u5bf9\u5e94\u7684v\u539f\u672c\u662f1\uff0c\u4f7f\u7528\u8be5\u65b9\u6cd5\u540e\u53d8\u4e3a2")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.decr(key,",(0,l.kt)("em",{parentName:"td"},"delta"),"=1,version=None)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bf9\u7f13\u5b58\u4e2d\u7684\u6570\u636e\u505a\u9012\u51cf\u64cd\u4f5c\uff0c\u5982k\u5bf9\u5e94\u7684v\u539f\u672c\u662f2\uff0c\u4f7f\u7528\u8be5\u65b9\u6cd5\u540e\u53d8\u4e3a1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cache.close()"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5173\u95ed\u7f13\u5b58\u94fe\u63a5")))),(0,l.kt)("p",null,"\u57fa\u672c\u7684\u7528\u6cd5\u5f88\u7b80\u5355\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},">>> cache.set('my_key', 'hello, world!', 30)\n>>> cache.get('my_key')\n'hello, world!'\n>>> # \u7b49\u5f85 30 \u79d2\uff0c'my_key'\u5c06\u8fc7\u671f...\n>>> cache.get('my_key')\nNone\n>>> # add()\u65b9\u6cd5\u53ea\u6dfb\u52a0\u4e0d\u5b58\u5728\u6216\u5931\u6548\u7684key\uff0c\u5982\u679ckey\u4ecd\u6709\u6548\u5219\u4e0d\u4f1a\u66f4\u65b0\n>>> cache.set('add_key', 'Initial value')\n>>> cache.add('add_key', 'New value') # \u4f7f\u7528add()\u65b9\u6cd5\u6765\u65b0\u589e\u4e00\u4e2a\u539f\u6765\u6ca1\u6709\u7684\u952e\u503c\u3002 \u5b83\u63a5\u53d7\u7684\u53c2\u6570\u548cset()\u4e00\u6837\uff0c\u4f46\u662f\u5e76\u4e0d\u53bb\u5c1d\u8bd5\u66f4\u65b0\u5df2\u7ecf\u5b58\u5728\u7684\u952e\u503c\u3002\n>>> cache.get('add_key')\n'Initial value'\n>>> # \u540c\u65f6\u8bbe\u7f6e\u83b7\u53d6\u591a\u5bf9\u503c\n>>> cache.set('a', 1)\n>>> cache.set('b', 2)\n>>> cache.set('c', 3)\n>>> cache.get_many(['a', 'b', 'c'])\n{'a': 1, 'b': 2, 'c': 3}\n>>> cache.set_many({'a': 1, 'b': 2, 'c': 3})\n>>> cache.get_many(['a', 'b', 'c'])\n{'a': 1, 'b': 2, 'c': 3}\n>>> # \u5220\u9664\u7f13\u5b58\n>>> cache.delete('a')\n>>> cache.delete_many(['a', 'b', 'c'])\n>>> cache.clear()\n>>> # \u5173\u95ed\u8fde\u63a5\n>>> cache.close()\n")),(0,l.kt)("h2",{id:"\u9644\u5f55"},"\u9644\u5f55"),(0,l.kt)("h5",{id:"django\u4e2d\u5f15\u5165\u5e38\u89c1\u7684\u5305"},"django\u4e2d\u5f15\u5165\u5e38\u89c1\u7684\u5305"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"# urls.py\n# django\u8def\u7531\nfrom django.urls import include, path\n\n# \u5f15\u5165django\u914d\u7f6e\nfrom django.conf import settings\n\n# views.py\n# http\u54cd\u5e94\nfrom django.http import HttpResponse\n\n# \u5185\u7f6e\u6821\u9a8c\u5668\nfrom django.core import validators\n\n# \u7f13\u5b58\nfrom django.core.cache import caches\nfrom django.core.cache import cache\n")),(0,l.kt)("h5",{id:"drf\u4e2d\u5f15\u5165\u5e38\u89c1\u7684\u5305"},"DRF\u4e2d\u5f15\u5165\u5e38\u89c1\u7684\u5305"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from rest_framework import serializers\n\n# \u8f6c\u6210JSON\nfrom rest_framework.renderers import JSONRenderer\n\n# \u89e3\u6790JSON\nfrom rest_framework.parsers import JSONParser\n\nimport rest_framework.status\nimport rest_framework.Request\nimport rest_framework.Response\n\nimport rest_framework.mixins\n\n# \u901a\u7528\u89c6\u56fe\nimport rest_framework.generics\n\n")),(0,l.kt)("p",null,"sudo ln -s /Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/config-3.8-darwin  /Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/config-3.8/libpython3.8.a"))}k.isMDXComponent=!0}}]);